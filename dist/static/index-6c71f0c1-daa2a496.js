import{S as Pa,E as wa,o as Ea,c as Ca,r as c,B as Ia,d as co,j as i,F as B,D as Oa,s as z,a as F,_ as Da,P as Ke,b as Te,e as Fe,i as St,u as qe,f as W,g as Ma,h as C,k as Ra,l as Ta,m as lo,n as uo,p as Xe,q as ka,t as ja,v as ke,w as ie,x as Pt,y as Na,z as Aa,A as La,C as Fa,G as za,H as Me,I as po,J as ho,K as Ba,L as kt,M as jt,N as ve,O as Wa,Q as Va,R as pn,T as Ua,U as Ha,V as Ga,W as se,X as fo,Y as M,Z as R,$ as be,a0 as ee,a1 as Nt,a2 as At,a3 as mo,a4 as $a,a5 as ne,a6 as Ya,a7 as je,a8 as Lt,a9 as q,aa as go,ab as Re,ac as Ka,ad as Se,ae as Je,af as qa,ag as vo,ah as Xa,ai as Ja,aj as Qa,ak as Ne,al as Za,am as ce,an as we,ao as er,ap as Qe,aq as tr,ar as bo,as as nr,at as or,au as ar,av as yo,aw as rr,ax as Ft,ay as hn,az as ir,aA as zt,aB as Ae,aC as sr,aD as cr,aE as wt,aF as _o,aG as lr,aH as ur,aI as dr,aJ as pr,aK as hr,aL as fr,aM as mr,aN as gr,aO as vr,aP as pe,aQ as he,aR as Ee,aS as xo,aT as Ze,aU as br,aV as Bt,aW as Wt,aX as yr,aY as _r,aZ as xr,a_ as Sr,a$ as Pr,b0 as So,b1 as Po,b2 as wr,b3 as Er,b4 as Cr,b5 as ue,b6 as wo,b7 as Ir,b8 as Eo,b9 as Et,ba as Or,bb as Dr,bc as Mr,bd as Co,be as Rr,bf as Tr,bg as kr,bh as Io,bi as jr,bj as Nr,bk as Oo,bl as Vt,bm as Ar,bn as mt,bo as Lr,bp as Fr,bq as zr,br as fn,bs as Br,bt as Do,bu as gt,bv as Wr,bw as mn,bx as Ct,by as Mo,bz as Vr,bA as Ur,bB as Hr,bC as Gr,bD as $r,bE as Yr,bF as Ro,bG as Kr,bH as Ut,bI as qr,bJ as Xr,bK as Jr,bL as Qr,bM as Zr,bN as ei,bO as ti,bP as ni,bQ as oi,bR as ai,bS as It,bT as ri,bU as ii,bV as si,bW as ci,bX as li,bY as Ot,bZ as ui,b_ as di,b$ as pi,c0 as gn,c1 as hi,c2 as fi,c3 as To,c4 as mi,c5 as gi,c6 as vi,c7 as bi,c8 as yi,c9 as vt,ca as vn,cb as _i,cc as bn,cd as xi}from"./sanity-46aa66c6.js";function ko(t,e){var n=typeof e=="object";return new Promise(function(o,a){var r=new Pa({next:function(s){o(s),r.unsubscribe()},error:a,complete:function(){n?o(e.defaultValue):a(new wa)}});t.subscribe(r)})}function Si(){return Ea(function(t,e){var n,o=!1;t.subscribe(Ca(e,function(a){var r=n;n=a,o&&e.next([r,a]),o=!0}))})}function Pi(t,e){var n=c.useCallback(function(){var s=new Ia(t),l=s.asObservable().pipe(co());return[e?l.pipe(e):l,s]},[]),o=c.useRef();o.current||(o.current=n());var a=o.current[0];c.useEffect(function(){if(o.current){var s=o.current,l=s[1];l.next(t)}},[t,o]);var r=c.useRef(!1);return c.useEffect(function(){return r.current&&(o.current||(o.current=n()),r.current=!1),function(){if(o.current){r.current=!0;var s=o.current,l=s[1];l.complete(),o.current=void 0}}},[]),a}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var yn=Object.getOwnPropertySymbols,wi=Object.prototype.hasOwnProperty,Ei=Object.prototype.propertyIsEnumerable;function Ci(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Ii(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(e).map(function(r){return e[r]});if(o.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(r){a[r]=r}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Oi=Ii()?Object.assign:function(t,e){for(var n,o=Ci(t),a,r=1;r<arguments.length;r++){n=Object(arguments[r]);for(var s in n)wi.call(n,s)&&(o[s]=n[s]);if(yn){a=yn(n);for(var l=0;l<a.length;l++)Ei.call(n,a[l])&&(o[a[l]]=n[a[l]])}}return o},ze=Oi,Di={};function Z(t,e,n,o,a,r,s,l){if(!t){var u;if(e===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,o,a,r,s,l],p=0;u=new Error(e.replace(/%s/g,function(){return d[p++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var _n="mixins";function Mi(t,e,n){var o=[],a={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},r={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},s={displayName:function(v,f){v.displayName=f},mixins:function(v,f){if(f)for(var g=0;g<f.length;g++)u(v,f[g])},childContextTypes:function(v,f){v.childContextTypes=ze({},v.childContextTypes,f)},contextTypes:function(v,f){v.contextTypes=ze({},v.contextTypes,f)},getDefaultProps:function(v,f){v.getDefaultProps?v.getDefaultProps=h(v.getDefaultProps,f):v.getDefaultProps=f},propTypes:function(v,f){v.propTypes=ze({},v.propTypes,f)},statics:function(v,f){d(v,f)},autobind:function(){}};function l(v,f){var g=a.hasOwnProperty(f)?a[f]:null;_.hasOwnProperty(f)&&Z(g==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",f),v&&Z(g==="DEFINE_MANY"||g==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",f)}function u(v,f){if(f){Z(typeof f!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),Z(!e(f),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var g=v.prototype,E=g.__reactAutoBindPairs;f.hasOwnProperty(_n)&&s.mixins(v,f.mixins);for(var S in f)if(f.hasOwnProperty(S)&&S!==_n){var O=f[S],D=g.hasOwnProperty(S);if(l(D,S),s.hasOwnProperty(S))s[S](v,O);else{var T=a.hasOwnProperty(S),N=typeof O=="function",j=N&&!T&&!D&&f.autobind!==!1;if(j)E.push(S,O),g[S]=O;else if(D){var k=a[S];Z(T&&(k==="DEFINE_MANY_MERGED"||k==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",k,S),k==="DEFINE_MANY_MERGED"?g[S]=h(g[S],O):k==="DEFINE_MANY"&&(g[S]=b(g[S],O))}else g[S]=O}}}}function d(v,f){if(f)for(var g in f){var E=f[g];if(f.hasOwnProperty(g)){var S=g in s;Z(!S,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',g);var O=g in v;if(O){var D=r.hasOwnProperty(g)?r[g]:null;Z(D==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",g),v[g]=h(v[g],E);return}v[g]=E}}}function p(v,f){Z(v&&f&&typeof v=="object"&&typeof f=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var g in f)f.hasOwnProperty(g)&&(Z(v[g]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",g),v[g]=f[g]);return v}function h(v,f){return function(){var E=v.apply(this,arguments),S=f.apply(this,arguments);if(E==null)return S;if(S==null)return E;var O={};return p(O,E),p(O,S),O}}function b(v,f){return function(){v.apply(this,arguments),f.apply(this,arguments)}}function m(v,f){var g=f.bind(v);return g}function x(v){for(var f=v.__reactAutoBindPairs,g=0;g<f.length;g+=2){var E=f[g],S=f[g+1];v[E]=m(v,S)}}var P={componentDidMount:function(){this.__isMounted=!0}},I={componentWillUnmount:function(){this.__isMounted=!1}},_={replaceState:function(v,f){this.updater.enqueueReplaceState(this,v,f)},isMounted:function(){return!!this.__isMounted}},y=function(){};ze(y.prototype,t.prototype,_);function w(v){var f=function(E,S,O){this.__reactAutoBindPairs.length&&x(this),this.props=E,this.context=S,this.refs=Di,this.updater=O||n,this.state=null;var D=this.getInitialState?this.getInitialState():null;Z(typeof D=="object"&&!Array.isArray(D),"%s.getInitialState(): must return an object or null",f.displayName||"ReactCompositeComponent"),this.state=D};f.prototype=new y,f.prototype.constructor=f,f.prototype.__reactAutoBindPairs=[],o.forEach(u.bind(null,f)),u(f,P),u(f,v),u(f,I),f.getDefaultProps&&(f.defaultProps=f.getDefaultProps()),Z(f.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var g in a)f.prototype[g]||(f.prototype[g]=null);return f}return w}var Ri=Mi,Ge=c,Ti=Ri;if(typeof Ge>"u")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var ki=new Ge.Component().updater,et=Ti(Ge.Component,Ge.isValidElement,ki),ji=Date.now||Ni;function Ni(){return new Date().getTime()}var xn=ji,Ai=function(e,n,o){var a,r,s,l,u;n==null&&(n=100);function d(){var p=xn()-l;p<n&&p>0?a=setTimeout(d,n-p):(a=null,o||(u=e.apply(s,r),a||(s=r=null)))}return function(){s=this,r=arguments,l=xn();var h=o&&!a;return a||(a=setTimeout(d,n)),h&&(u=e.apply(s,r),s=r=null),u}},Li=Fi;function Fi(t){for(var e=zi(t),n=1732584193,o=-271733879,a=-1732584194,r=271733878,s=0;s<e.length;s+=16){var l=n,u=o,d=a,p=r;n=G(n,o,a,r,e[s+0],7,-680876936),r=G(r,n,o,a,e[s+1],12,-389564586),a=G(a,r,n,o,e[s+2],17,606105819),o=G(o,a,r,n,e[s+3],22,-1044525330),n=G(n,o,a,r,e[s+4],7,-176418897),r=G(r,n,o,a,e[s+5],12,1200080426),a=G(a,r,n,o,e[s+6],17,-1473231341),o=G(o,a,r,n,e[s+7],22,-45705983),n=G(n,o,a,r,e[s+8],7,1770035416),r=G(r,n,o,a,e[s+9],12,-1958414417),a=G(a,r,n,o,e[s+10],17,-42063),o=G(o,a,r,n,e[s+11],22,-1990404162),n=G(n,o,a,r,e[s+12],7,1804603682),r=G(r,n,o,a,e[s+13],12,-40341101),a=G(a,r,n,o,e[s+14],17,-1502002290),o=G(o,a,r,n,e[s+15],22,1236535329),n=$(n,o,a,r,e[s+1],5,-165796510),r=$(r,n,o,a,e[s+6],9,-1069501632),a=$(a,r,n,o,e[s+11],14,643717713),o=$(o,a,r,n,e[s+0],20,-373897302),n=$(n,o,a,r,e[s+5],5,-701558691),r=$(r,n,o,a,e[s+10],9,38016083),a=$(a,r,n,o,e[s+15],14,-660478335),o=$(o,a,r,n,e[s+4],20,-405537848),n=$(n,o,a,r,e[s+9],5,568446438),r=$(r,n,o,a,e[s+14],9,-1019803690),a=$(a,r,n,o,e[s+3],14,-187363961),o=$(o,a,r,n,e[s+8],20,1163531501),n=$(n,o,a,r,e[s+13],5,-1444681467),r=$(r,n,o,a,e[s+2],9,-51403784),a=$(a,r,n,o,e[s+7],14,1735328473),o=$(o,a,r,n,e[s+12],20,-1926607734),n=Y(n,o,a,r,e[s+5],4,-378558),r=Y(r,n,o,a,e[s+8],11,-2022574463),a=Y(a,r,n,o,e[s+11],16,1839030562),o=Y(o,a,r,n,e[s+14],23,-35309556),n=Y(n,o,a,r,e[s+1],4,-1530992060),r=Y(r,n,o,a,e[s+4],11,1272893353),a=Y(a,r,n,o,e[s+7],16,-155497632),o=Y(o,a,r,n,e[s+10],23,-1094730640),n=Y(n,o,a,r,e[s+13],4,681279174),r=Y(r,n,o,a,e[s+0],11,-358537222),a=Y(a,r,n,o,e[s+3],16,-722521979),o=Y(o,a,r,n,e[s+6],23,76029189),n=Y(n,o,a,r,e[s+9],4,-640364487),r=Y(r,n,o,a,e[s+12],11,-421815835),a=Y(a,r,n,o,e[s+15],16,530742520),o=Y(o,a,r,n,e[s+2],23,-995338651),n=K(n,o,a,r,e[s+0],6,-198630844),r=K(r,n,o,a,e[s+7],10,1126891415),a=K(a,r,n,o,e[s+14],15,-1416354905),o=K(o,a,r,n,e[s+5],21,-57434055),n=K(n,o,a,r,e[s+12],6,1700485571),r=K(r,n,o,a,e[s+3],10,-1894986606),a=K(a,r,n,o,e[s+10],15,-1051523),o=K(o,a,r,n,e[s+1],21,-2054922799),n=K(n,o,a,r,e[s+8],6,1873313359),r=K(r,n,o,a,e[s+15],10,-30611744),a=K(a,r,n,o,e[s+6],15,-1560198380),o=K(o,a,r,n,e[s+13],21,1309151649),n=K(n,o,a,r,e[s+4],6,-145523070),r=K(r,n,o,a,e[s+11],10,-1120210379),a=K(a,r,n,o,e[s+2],15,718787259),o=K(o,a,r,n,e[s+9],21,-343485551),n=le(n,l),o=le(o,u),a=le(a,d),r=le(r,p)}return Be(n)+Be(o)+Be(a)+Be(r)}var Sn="0123456789abcdef";function Ht(t,e){var n=t&1|e&1,o=t>>>1|e>>>1;return o<<1|n}function Dt(t,e){var n=t&1^e&1,o=t>>>1^e>>>1;return o<<1|n}function $e(t,e){var n=t&1&(e&1),o=t>>>1&e>>>1;return o<<1|n}function le(t,e){var n=(t&65535)+(e&65535),o=(t>>16)+(e>>16)+(n>>16);return o<<16|n&65535}function Be(t){var e="",n;for(n=0;n<=3;n++)e+=Sn.charAt(t>>n*8+4&15)+Sn.charAt(t>>n*8&15);return e}function zi(t){var e=(t.length+8>>6)+1,n=new Array(e*16),o;for(o=0;o<e*16;o++)n[o]=0;for(o=0;o<t.length;o++)n[o>>2]|=t.charCodeAt(o)<<(t.length*8+o)%4*8;n[o>>2]|=128<<(t.length*8+o)%4*8;var a=t.length*8;return n[e*16-2]=a&255,n[e*16-2]|=(a>>>8&255)<<8,n[e*16-2]|=(a>>>16&255)<<16,n[e*16-2]|=(a>>>24&255)<<24,n}function Bi(t,e){return t<<e|t>>>32-e}function tt(t,e,n,o,a,r){return le(Bi(le(le(e,t),le(o,r)),a),n)}function G(t,e,n,o,a,r,s){return tt(Ht($e(e,n),$e(~e,o)),t,e,a,r,s)}function $(t,e,n,o,a,r,s){return tt(Ht($e(e,o),$e(n,~o)),t,e,a,r,s)}function Y(t,e,n,o,a,r,s){return tt(Dt(Dt(e,n),o),t,e,a,r,s)}function K(t,e,n,o,a,r,s){return tt(Dt(n,Ht(e,~o)),t,e,a,r,s)}var Wi=Math.ceil(Math.random()*10),Vi=function(){return++Wi},Gt=function(t){return Object.prototype.toString.call(t).slice(8,-1)},Ui=Gt;function Hi(t){var e=Ui(t);return e!=="Object"&&e!=="Array"}var jo=Hi,Gi=c,$i=et,We=Gi.createElement,Yi=$i({getDefaultProps:function(){return{string:"",highlight:""}},shouldComponentUpdate:function(t){return t.highlight!==this.props.highlight},render:function(){var t=this.props,e=t.string.search(t.highlight);if(!t.highlight||e===-1)return We("span",null,t.string);var n=t.highlight.source.length,o=t.string.substr(e,n);return We("span",null,t.string.split(t.highlight).map(function(a,r){return We("span",{key:r},r>0?We("span",{className:"json-inspector__hl"},o):null,a)}))}}),Ki=c,qi=et,Xi=Li,Ji=Vi,No=Gt,Ve=jo,Qi=Yi,Q=Ki.createElement,Zi=".root.",Ao=qi({getInitialState:function(){return{expanded:this._isInitiallyExpanded(this.props)}},getDefaultProps:function(){return{root:!1,prefix:""}},render:function(){var t="id_"+Ji(),e=this.props,n={path:this.keypath(),key:e.label.toString(),value:e.data},o=this._onClick.bind(this,n);return Q("div",{className:this.getClassName(),id:"leaf-"+this._rootPath()},Q("input",{className:"json-inspector__radio",type:"radio",name:e.id,id:t,tabIndex:-1}),Q("label",{className:"json-inspector__line",htmlFor:t,onClick:o},Q("div",{className:"json-inspector__flatpath"},n.path),Q("span",{className:"json-inspector__key"},this.format(n.key),":",this.renderInteractiveLabel(n.key,!0)),this.renderTitle(),this.renderShowOriginalButton()),this.renderChildren())},renderTitle:function(){var t=this.data(),e=No(t);switch(e){case"Array":var n=t.length;return Q("span",{className:"json-inspector__value json-inspector__value_helper"},(n>0?"[â€¦] ":"[] ")+es(n));case"Object":var o=Object.keys(t).length;return Q("span",{className:"json-inspector__value json-inspector__value_helper"},(o>0?"{â€¦} ":"{} ")+ts(o));default:return Q("span",{className:"json-inspector__value json-inspector__value_"+e.toLowerCase()},this.format(String(t)),this.renderInteractiveLabel(t,!1))}},renderChildren:function(){var t=this.props,e=this._rootPath(),n=this.data();return this.state.expanded&&!Ve(n)?Object.keys(n).map(function(o){var a=n[o],r=!this.state.original||(t.verboseShowOriginal?t.query:!1);return Q(Ao,{data:a,label:o,prefix:e,onClick:t.onClick,id:t.id,query:t.query,getOriginal:r?t.getOriginal:null,key:ns(o,a),isExpanded:t.isExpanded,interactiveLabel:t.interactiveLabel,verboseShowOriginal:t.verboseShowOriginal})},this):null},renderShowOriginalButton:function(){var t=this.props;return Ve(t.data)||this.state.original||!t.getOriginal||!t.query||bt(this.keypath(),t.query)?null:Q("span",{className:"json-inspector__show-original",onClick:this._onShowOriginalClick})},renderInteractiveLabel:function(t,e){return typeof this.props.interactiveLabel=="function"?Q(this.props.interactiveLabel,{value:String(t),originalValue:t,isKey:e,keypath:this.keypath()}):null},componentWillReceiveProps:function(t){t.query&&this.setState({expanded:!bt(t.label,t.query)}),this.props.query&&!t.query&&this.setState({expanded:this._isInitiallyExpanded(t)})},_rootPath:function(){return this.props.prefix+"."+this.props.label},keypath:function(){return this._rootPath().substr(Zi.length)},data:function(){return this.state.original||this.props.data},format:function(t){return Q(Qi,{string:t,highlight:this.props.query})},getClassName:function(){var t="json-inspector__leaf";return this.props.root&&(t+=" json-inspector__leaf_root"),this.state.expanded&&(t+=" json-inspector__leaf_expanded"),Ve(this.props.data)||(t+=" json-inspector__leaf_composite"),t},toggle:function(){this.setState({expanded:!this.state.expanded})},_onClick:function(t,e){this.toggle(),this.props.onClick(t),e.stopPropagation()},_onShowOriginalClick:function(t){this.setState({original:this.props.getOriginal(this.keypath())}),t.stopPropagation()},_isInitiallyExpanded:function(t){var e=this.keypath();return t.root?!0:t.query?!bt(e,t.query)&&typeof t.getOriginal=="function":t.isExpanded(e,t.data)}});function es(t){return t+(t===1?" item":" items")}function ts(t){return t+(t===1?" property":" properties")}function ns(t,e){if(Ve(e)){var n=Xi(String(e));return t+":"+n}else return t+"["+No(e)+"]"}function bt(t,e){return t.indexOf(e)!==-1}var os=Ao,Lo=function(){},as=c,rs=et,is=as.createElement,ss=Lo,cs=rs({getDefaultProps:function(){return{onChange:ss}},render:function(){return is("input",{className:"json-inspector__search",type:"search",placeholder:"Search",onChange:this.onChange})},onChange:function(t){this.props.onChange(t.target.value)}}),Fo=function(t){return Object.keys(t).length===0},ls=Object.keys,us=jo,ds=Fo,ps=function(t,e){e||(e={cacheResults:!0});var n={};return function(o){if(!e.cacheResults)return Ue(t,o,e);var a;if(!n[o]){for(var r=o.length-1;r>0;r-=1)if(a=o.substr(0,r),n[a]){n[o]=Ue(n[a],o,e);break}}return n[o]||(n[o]=Ue(t,o,e)),n[o]}};function Ue(t,e,n){return ls(t).reduce(function(o,a){var r=t[a],s;return us(r)?(yt(e,a,n)||yt(e,r,n))&&(o[a]=r):yt(e,a,n)?o[a]=r:(s=Ue(r,e,n),ds(s)||Object.assign(o,hs(a,s))),o},{})}function yt(t,e,n){if(e){var o=String(e),a=t;return n.ignoreCase&&(o=o.toLowerCase(),a=a.toLowerCase()),o.indexOf(a)!==-1}}function hs(t,e){var n={};return n[t]=e,n}var fs=Gt,_t=".";function Mt(t,e){var n=e.split(_t),o=n.shift();if(!o)return t;var a=fs(t);if(a==="Array"&&t[Pn(o)])return Mt(t[Pn(o)],n.join(_t));if(a==="Object"&&t[o])return Mt(t[o],n.join(_t))}function Pn(t){return parseInt(t,10)}var ms=Mt,gs=c,vs=et,bs=Ai,De=gs.createElement,ys=os,_s=cs,xs=ps,Ss=Fo,Ps=ms,ws=Lo,Es=vs({getDefaultProps:function(){return{data:null,search:_s,searchOptions:{debounceTime:0},className:"",id:"json-"+Date.now(),onClick:ws,filterOptions:{cacheResults:!0,ignoreCase:!1},validateQuery:function(t){return t.length>=2},isExpanded:function(t,e){return!1},verboseShowOriginal:!1}},getInitialState:function(){return{query:this.props.query||""}},render:function(){var t=this.props,e=this.state,n=e.query!==""&&t.validateQuery(e.query),o=n?e.filterer(e.query):t.data,a=n&&Ss(o);return De("div",{className:"json-inspector "+t.className},this.renderToolbar(),a?De("div",{className:"json-inspector__not-found"},"Nothing found"):De(ys,{data:o,onClick:t.onClick,id:t.id,getOriginal:this.getOriginal,query:n?new RegExp(e.query,t.filterOptions.ignoreCase?"i":""):null,label:"root",root:!0,isExpanded:t.isExpanded,interactiveLabel:t.interactiveLabel,verboseShowOriginal:t.verboseShowOriginal}))},renderToolbar:function(){var t=this.props.search;if(t)return De("div",{className:"json-inspector__toolbar"},De(t,{onChange:bs(this.search,this.props.searchOptions.debounceTime),data:this.props.data,query:this.state.query}))},search:function(t){this.setState({query:t})},componentWillMount:function(){this.createFilterer(this.props.data,this.props.filterOptions)},componentWillReceiveProps:function(t){this.createFilterer(t.data,t.filterOptions);var e=typeof t.query=="string"&&t.query!==this.state.query;e&&this.setState({query:t.query})},shouldComponentUpdate:function(t,e){return t.query!==this.props.query||e.query!==this.state.query||t.data!==this.props.data||t.onClick!==this.props.onClick},createFilterer:function(t,e){this.setState({filterer:xs(t,e)})},getOriginal:function(t){return Ps(this.props.data,t)}}),Cs=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,n=Object.create(null),o=Object.create(null);function a(r,s){n[r]=s,e++,e>=t&&(e=0,o=n,n=Object.create(null))}return{has:function(r){return n[r]!==void 0||o[r]!==void 0},remove:function(r){n[r]!==void 0&&(n[r]=void 0),o[r]!==void 0&&(o[r]=void 0)},get:function(r){var s=n[r];if(s!==void 0)return s;if((s=o[r])!==void 0)return a(r,s),s},set:function(r,s){n[r]!==void 0?n[r]=s:a(r,s)},clear:function(){n=Object.create(null),o=Object.create(null)}}},wn,En,Cn,In,On,Dn,Mn,Rn,Tn,kn,jn,Nn,An,Ln,Fn,zn,Bn,Wn,Vn,Un,Hn,Gn,$n,Yn,Kn,qn,Xn,Jn;function L(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function $t(t){let{children:e,ms:n=0}=t;const[o,a]=c.useState(n<=0);return c.useEffect(()=>{if(n<=0)return;const r=setTimeout(()=>a(!0),n);return()=>{clearTimeout(r)}},[n]),!o||!e?i(B,{}):typeof e=="function"?e():e}const Yt=t=>{const{actions:e,children:n,actionProps:o,onActionComplete:a}=t;return i(_o,{onReset:a,hooks:e,args:o,children:n})},Is=t=>{const{badges:e,children:n,badgeProps:o,...a}=t;return i(_o,{...a,hooks:e,args:o,children:n})},Os=[];function Ds(t){const{children:e,flatIndex:n,index:o,params:a,payload:r,siblingIndex:s}=t,{navigate:l,navigateIntent:u}=Ae(),d=lr(),p=c.useMemo(()=>(d==null?void 0:d.panes)||Os,[d==null?void 0:d.panes]),h=o-1,b=c.useCallback(_=>{const y=p[h]||[],w=y[s],v=_(y,w),f=[...p.slice(0,h),v,...p.slice(h+1)],g={...d||{},panes:f};return setTimeout(()=>l(g),0),g},[h,l,p,d,s]),m=c.useCallback(_=>{b((y,w)=>[...y.slice(0,s),{...w,payload:_},...y.slice(s+1)])},[b,s]),x=c.useCallback(_=>{b((y,w)=>[...y.slice(0,s),{...w,params:_},...y.slice(s+1)])},[b,s]),P=c.useCallback(_=>{let{id:y,parentRefPath:w,type:v,template:f}=_;l({panes:[...p.slice(0,h+1),[{id:y,params:{template:f.id,parentRefPath:ur(w),type:v},payload:f.params}]]})},[h,l,p]),I=c.useMemo(()=>({index:n,groupIndex:h,siblingIndex:s,payload:r,params:a,hasGroupSiblings:p[h]?p[h].length>1:!1,groupLength:p[h]?p[h].length:0,routerPanesState:p,ChildLink:dr,BackLink:pr,ReferenceChildLink:hr,handleEditReference:P,ParameterizedLink:fr,replaceCurrent:function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};b(()=>[{id:_.id||"",payload:_.payload,params:_.params||{}}])},closeCurrent:()=>{b((_,y)=>_.length>1?_.filter(w=>w!==y):_)},duplicateCurrent:_=>{b((y,w)=>{const v={...w,payload:(_==null?void 0:_.payload)||w.payload,params:(_==null?void 0:_.params)||w.params};return[...y.slice(0,s),v,...y.slice(s)]})},setView:_=>{const y=kt(a,"view");return x(_?{...y,view:_}:y)},setParams:x,setPayload:m,navigateIntent:u}),[n,h,P,b,u,a,r,p,x,m,s]);return i(mr.Provider,{value:I,children:e})}function Ms(t,e,n,o){var a,r;const s={flex:t.left.flex+t.right.flex,width:t.left.width+t.right.width},l=(a=e.minWidth)!=null?a:Ot,u=(r=n.minWidth)!=null?r:Ot,d=Math.min(e.maxWidth||1/0,s.width-u),p=Math.min(n.maxWidth||1/0,s.width-l);let h=l-t.left.width;const b=t.right.width-p;h<b&&(h=b);let m=t.right.width-u;const x=d-t.left.width;m>x&&(m=x);const P=Math.min(Math.max(o,h),m),I=t.left.width+P,_=t.right.width-P,y=I/s.width*s.flex,w=_/s.width*s.flex;return{leftFlex:y,leftW:I,rightFlex:w,rightW:_}}function Rs(t,e){const n=[];let o=e;for(;o!==t;){const a=o.parentElement;if(!a)return n;const s=Array.from(a.childNodes).indexOf(o);if(n.unshift(s),a===t)return n;o=a}return n}const Qn=[];function Ts(t,e){const n=new WeakMap;for(const a of e)n.set(a,Rs(t,a));const o=(a,r)=>{const s=n.get(a)||Qn,l=n.get(r)||Qn,u=Math.max(s.length,l.length);for(let d=0;d<u;d+=1){const p=s[d]||-1,h=l[d]||-1;if(p!==h)return p-h}return 0};e.sort(o)}function ks(){const t=[],e=[],n=new WeakMap,o=new Set,a={};let r=null,s=0,l=null,u=new Map,d=!1;function p(y){o.add(y),l===y&&(l=null),_()}function h(y){o.delete(y),l=y,_()}function b(y,w){return n.set(y,{...w,original:w}),e.push(y),r&&Ts(r,e),h(y),()=>{const v=e.indexOf(y);v>-1&&e.splice(v,1),n.delete(y),_()}}function m(y,w,v){var f,g,E,S;const O=e.indexOf(w),D=n.get(w);if(!D)return;const T=e[O+1],N=n.get(T);if(N){if(y==="start"&&(d=!0,a.left={element:w,flex:D.flex||1,width:w.offsetWidth},a.right={element:T,flex:N.flex||1,width:T.offsetWidth},_()),y==="move"&&a.left&&a.right){u=new Map;const{leftW:j,rightW:k,leftFlex:X,rightFlex:de}=Ms(a,D,N,v);u.set(w,{flex:X,width:j}),u.set(T,{flex:de,width:k}),_()}if(y==="end"){d=!1;const j=u.get(w),k=u.get(T);n.set(w,{...D,currentMinWidth:0,currentMaxWidth:(f=D.maxWidth)!=null?f:1/0,flex:(g=j==null?void 0:j.flex)!=null?g:D.flex}),n.set(T,{...N,currentMinWidth:0,currentMaxWidth:(E=D.maxWidth)!=null?E:1/0,flex:(S=k==null?void 0:k.flex)!=null?S:N.flex}),u=new Map,delete a.left,delete a.right,_()}}}function x(y){r=y}function P(y){s=y,_()}function I(y){return t.push(y),()=>{const w=t.push(y);w>-1&&t.splice(w,1)}}return{collapse:p,expand:h,mount:b,resize:m,setRootElement:x,setRootWidth:P,subscribe:I};function _(){var y,w,v,f;if(!s)return;const g=[];for(const j of e)j!==l&&g.unshift(j);l&&g.unshift(l);const E=new WeakMap,S=g.length,O=g[0],D=(S-1)*vt;let T=s-D;for(const j of g){const k=n.get(j);if(!k)continue;const X=k.currentMinWidth||k.minWidth||Ot,de=j===O,oe=o.has(j),te=X>T,U=de?!1:oe||te,ae=u.get(j);E.set(j,{element:j,collapsed:U,currentMinWidth:(y=ae==null?void 0:ae.width)!=null?y:k.currentMinWidth,currentMaxWidth:(w=ae==null?void 0:ae.width)!=null?w:k.currentMaxWidth,flex:(f=(v=ae==null?void 0:ae.flex)!=null?v:k.flex)!=null?f:1}),U?T-=vt:T-=X-vt}const N=[];for(const j of e){const k=E.get(j);k&&N.push(k)}for(const j of t)j({expandedElement:l||e[e.length-1]||null,panes:N,resizing:d})}}function js(t){const{children:e,minWidth:n,onCollapse:o,onExpand:a,...r}=t,s=c.useMemo(()=>ks(),[]),[l,u]=c.useState(null),d=Qe(l),p=(d==null?void 0:d.width)||0,h=p===void 0||!n?void 0:p<n,[b,m]=c.useState({expandedElement:null,panes:[],resizing:!1});c.useEffect(()=>s.setRootElement(l),[s,l]),c.useEffect(()=>s.setRootWidth(p),[s,p]),c.useEffect(()=>s.subscribe(m),[s]),c.useEffect(()=>{h!==void 0&&(h&&o&&o(),!h&&a&&a())},[h,o,a]);const x=c.useMemo(()=>({collapse:s.collapse,collapsed:h,expand:s.expand,expandedElement:b.expandedElement,mount:s.mount,panes:b.panes,resize:s.resize,resizing:b.resizing}),[h,s,b.expandedElement,b.panes,b.resizing]);return i(gr.Provider,{value:x,children:i(vr,{"data-ui":"PaneLayout",...r,"data-collapsed":h?"":void 0,"data-resizing":b.resizing?"":void 0,"data-mounted":p?"":void 0,ref:u,children:e})})}class Pe extends Error{constructor(e){let{message:n,context:o,helpId:a,cause:r}=e;super(n),this.context=o,this.helpId=a,this.cause=r}}const Zn=new WeakMap;function nt(t){const e=Zn.get(t);if(e)return e;const n=gi();return Zn.set(t,n),n}const eo=new WeakMap;function zo(t,e){const n=eo.get(t)||new Map;if(n){const r=n.get(e);if(r)return r}const o=t[e];if(typeof o!="function")throw new Error("Expected property `".concat(e,"` to be a function but got ").concat(typeof o," instead."));const a=o.bind(t);return n.set(e,a),eo.set(t,n),a}const Ns=t=>!!t&&typeof(t==null?void 0:t.then)=="function",As=t=>he(t)?typeof t.serialize=="function":!1,Ls=t=>(e,n,o)=>{try{return t(e,n,o)}catch(a){throw a instanceof Pe?a:new Pe({message:typeof(a==null?void 0:a.message)=="string"?a.message:"",context:n,cause:a})}},Fs=t=>function(){return t(...arguments).pipe(vi(1),bi())};function Bo(t){const e=Ls(Fs(t((n,o,a)=>{if(!n)throw new Pe({message:"Pane returned no child",context:o,helpId:"structure-item-returned-no-child"});return Ns(n)||ui(n)?Ro(n).pipe(Ze(r=>e(r,o,a))):As(n)?e(n.serialize(o),o,a):typeof n=="function"?e(n(o.id,o),o,a):ue(n)})));return e}async function zs(t){const e=new Map,o=Bo(u=>(d,p,h)=>{const b=d&&"".concat(nt(d),"-").concat(p.path.join("__")),m=b&&e.get(b);if(m)return m;const x=u(d,p,h);return b&&e.set(b,x),x}),a=[[{id:"__edit__".concat(t.params.id),params:{...kt(t.params,["id"]),type:t.params.type},payload:t.payload}]];async function r(u){let{currentId:d,flatIndex:p,intent:h,params:b,parent:m,path:x,payload:P,unresolvedPane:I,levelIndex:_,structureContext:y}=u;var w;if(!I)return[];const{id:v,type:f,...g}=b,S=await ko(o(I,{id:d,splitIndex:0,parent:m,path:x,index:p,params:{},payload:void 0,structureContext:y},p));return S.type==="document"&&S.id===v?[{panes:[...x.slice(0,x.length-1).map(O=>[{id:O}]),[{id:v,params:g,payload:P}]],depthIndex:x.length,levelIndex:_}]:(w=S.canHandleIntent)!=null&&w.call(S,h,b,{pane:S,index:p})||S.type==="documentList"&&S.schemaTypeName===f&&S.options.filter==="_type == $type"?[{panes:[...x.map(O=>[{id:O}]),[{id:b.id,params:g,payload:P}]],depthIndex:x.length,levelIndex:_}]:S.type==="list"&&S.child&&S.items?(await Promise.all(S.items.map((O,D)=>O.type==="divider"?Promise.resolve([]):r({currentId:O._id||O.id,flatIndex:p+1,intent:h,params:b,parent:S,path:[...x,O.id],payload:P,unresolvedPane:typeof S.child=="function"?zo(S,"child"):S.child,levelIndex:D,structureContext:y})))).flat():[]}const l=(await r({currentId:"root",flatIndex:0,levelIndex:0,intent:t.intent,params:t.params,parent:null,path:[],payload:t.payload,unresolvedPane:t.rootPaneNode,structureContext:t.structureContext})).sort((u,d)=>u.depthIndex===d.depthIndex?u.levelIndex-d.levelIndex:u.depthIndex-d.depthIndex)[0];return l?l.panes:a}function fe(){const t=c.useContext(Oa);if(!t)throw new Error("DeskTool: missing context value");return t}const Bs=(t,e)=>{const n=t.replace(/^__edit__/,""),{params:o,payload:a,structureContext:{resolveDocumentNode:r}}=e,{type:s,template:l}=o;if(!s)throw new Error("Document type for document with ID ".concat(n," was not provided in the router params."));let u=r({schemaType:s,documentId:n});return u=u.id("editor").title("Editor"),l&&(u=u.initialValueTemplate(l,a)),u.serialize()};function Ws(t){var e,n;return"contextHash(".concat(JSON.stringify({id:t.id,parentId:parent&&nt(parent),path:t.path,index:t.index,splitIndex:t.splitIndex,serializeOptionsIndex:(e=t.serializeOptions)==null?void 0:e.index,serializeOptionsPath:(n=t.serializeOptions)==null?void 0:n.path}),")")}const to=t=>{const e={type:t.type,id:t.routerPaneSibling.id,params:t.routerPaneSibling.params||{},payload:t.routerPaneSibling.payload||null,flatIndex:t.flatIndex,groupIndex:t.groupIndex,siblingIndex:t.siblingIndex,path:t.path,paneNode:t.type==="resolvedMeta"?nt(t.paneNode):null};return"metaHash(".concat(JSON.stringify(e),")")};function He(t){let{unresolvedPane:e,flattenedRouterPanes:n,parent:o,path:a,resolvePane:r,structureContext:s}=t;const[l,...u]=n,d=u[0],p={id:l.routerPaneSibling.id,splitIndex:l.siblingIndex,parent:o,path:[...a,l.routerPaneSibling.id],index:l.flatIndex,params:l.routerPaneSibling.params||{},payload:l.routerPaneSibling.payload,structureContext:s};try{return r(e,p,l.flatIndex).pipe(Ze(h=>{const b={type:"resolvedMeta",...l,paneNode:h,path:p.path},m=u.map((P,I)=>({type:"loading",path:[...p.path,...u.slice(I).map((w,v)=>"[".concat(P.flatIndex+v,"]"))],paneNode:null,...P}));if(!u.length)return ue([b]);let x;return d!=null&&d.routerPaneSibling.id.startsWith("__edit__")?x=He({unresolvedPane:Bs,flattenedRouterPanes:u,parent:o,path:p.path,resolvePane:r,structureContext:s}):l.groupIndex===(d==null?void 0:d.groupIndex)?x=He({unresolvedPane:e,flattenedRouterPanes:u,parent:o,path:a,resolvePane:r,structureContext:s}):x=He({unresolvedPane:typeof h.child=="function"?zo(h,"child"):h.child,flattenedRouterPanes:u,parent:h,path:p.path,resolvePane:r,structureContext:s}),wo(ue([b,...m]),x.pipe(pe(P=>[b,...P])))}))}catch(h){if(h instanceof Pe&&(h.context&&console.warn("Pane resolution error at index ".concat(h.context.index).concat(h.context.splitIndex>0?" for split pane index ".concat(h.context.splitIndex):"",": ").concat(h.message).concat(h.helpId?" - see ".concat(Mo(h.helpId)):""),h),h.helpId==="structure-item-returned-no-child"))return ue([]);throw h}}function Vs(t){let{routerPanesStream:e,rootPaneNode:n,initialCacheState:o={cacheKeysByFlatIndex:[],flattenedRouterPanes:[],resolvedPaneCache:new Map,resolvePane:()=>di},structureContext:a}=t;return e.pipe(pe(s=>[[{id:"root"}],...s]),pe(s=>s.flatMap((u,d)=>u.map((p,h)=>({routerPaneSibling:p,groupIndex:d,siblingIndex:h}))).map((u,d)=>({...u,flatIndex:d}))),zr([]),Si(),pe(s=>{let[l,u]=s;for(let d=0;d<u.length;d++){const p=l[d],h=u[d];if(!St(p,h))return{flattenedRouterPanes:u,diffIndex:d}}return{flattenedRouterPanes:u,diffIndex:u.length}}),fn((s,l)=>{const{cacheKeysByFlatIndex:u,resolvedPaneCache:d}=s,{flattenedRouterPanes:p,diffIndex:h}=l,b=u.slice(0,h+1),m=u.slice(h+1),x=new Set(b.flatMap(_=>Array.from(_))),P=m.flatMap(_=>Array.from(_)).filter(_=>!x.has(_));for(const _ of P)d.delete(_);return{flattenedRouterPanes:p,cacheKeysByFlatIndex:u,resolvedPaneCache:d,resolvePane:Bo(_=>(y,w,v)=>{const f=y&&"".concat(nt(y),"-").concat(Ws(w)),g=f&&d.get(f);if(g)return g;const E=_(y,w,v);if(!f)return E;const S=u[v]||new Set;return S.add(f),u[v]=S,d.set(f,E),E})}},o),Ze(s=>{let{flattenedRouterPanes:l,resolvePane:u}=s;return He({unresolvedPane:n,flattenedRouterPanes:l,parent:null,path:[],resolvePane:u,structureContext:a})})).pipe(fn((s,l)=>l.map((u,d)=>{const p=s[d];return!p||u.type!=="loading"?u:p.routerPaneSibling.id===u.routerPaneSibling.id?p:u}),[]),co((s,l)=>{if(s.length!==l.length)return!1;for(let u=0;u<l.length;u++){const d=s[u],p=l[u];if(to(d)!==to(p))return!1}return!0}))}function Us(){const t=c.useMemo(()=>new Br(1),[]),e=c.useMemo(()=>t.asObservable().pipe(pe(o=>(o==null?void 0:o.panes)||[])),[t]),{state:n}=Ae();return c.useEffect(()=>{t.next(n)},[n,t]),e}function Hs(){const[t,e]=c.useState();if(t)throw t;const{structureContext:n,rootPaneNode:o}=fe(),[a,r]=c.useState({paneDataItems:[],resolvedPanes:[],routerPanes:[]}),s=Us();return c.useEffect(()=>{const u=Vs({rootPaneNode:o,routerPanesStream:s,structureContext:n}).pipe(pe(d=>{const p=d.reduce((m,x)=>{const P=m[x.groupIndex]||[];return P[x.siblingIndex]=x.routerPaneSibling,m[x.groupIndex]=P,m},[]),h=p.length,b=d.map(m=>{var x;const{groupIndex:P,flatIndex:I,siblingIndex:_,routerPaneSibling:y,path:w}=m,v=y.id,f=p[P+1];return{active:P===h-2,childItemId:(x=f==null?void 0:f[0].id)!=null?x:null,index:I,itemId:y.id,groupIndex:P,key:"".concat(m.type==="loading"?"unknown":m.paneNode.id,"-").concat(v,"-").concat(_),pane:m.type==="loading"?wt:m.paneNode,params:y.params||{},path:w.join(";"),payload:y.payload,selected:I===d.length-1,siblingIndex:_}});return{paneDataItems:b,routerPanes:p,resolvedPanes:b.map(m=>m.pane)}})).subscribe({next:d=>r(d),error:d=>e(d)});return()=>u.unsubscribe()},[o,s,n]),a}function Gs(t){let{panes:e}=t;const{navigate:n}=Ae();return c.useEffect(()=>{n({panes:e},{replace:!0})},[n,e]),i(ne,{height:"fill",children:i($t,{ms:300,children:C(F,{align:"center",direction:"column",height:"fill",justify:"center",children:[i(Ee,{muted:!0}),i(M,{marginTop:3,children:i(R,{muted:!0,size:1,children:"Redirectingâ€¦"})})]})})})}async function $s(t,e,n){if(e&&n)return{id:e,type:n};if(!e&&n)return{id:yi(),type:n};if(e&&!n){const o=await ko(t.resolveTypeForDocument(e));return{id:e,type:o}}throw new Pe({message:"Neither document `id` or `type` was provided when trying to resolve intent."})}function Ys(t){let{intent:e,params:n={},payload:o}=t;const{rootPaneNode:a,structureContext:r}=fe(),s=Do(),l=ie(n),u=ie(o),[d,p]=c.useState(null),[h,b]=c.useState(null),m=typeof l.id=="string"?l.id:void 0,x=typeof l.type=="string"?l.type:void 0;if(c.useEffect(()=>{const P={current:!1};async function I(){const{id:_,type:y}=await $s(s,m,x);return zs({intent:e,params:{...l,id:_,type:y},payload:u,rootPaneNode:a,structureContext:r})}return I().then(_=>{P.current||p(_)}).catch(b),()=>{P.current=!0}},[s,m,e,l,u,a,r,x]),h)throw h;return d?i(Gs,{panes:d}):i(ne,{height:"fill",children:i($t,{ms:300,children:C(F,{align:"center",direction:"column",height:"fill",justify:"center",children:[i(Ee,{muted:!0}),i(M,{marginTop:3,children:i(R,{align:"center",muted:!0,size:1,children:"Loadingâ€¦"})})]})})})}const Ks=z.span(wn||(wn=L([`
  &:not(:last-child)::after {
    content: ' âž ';
    opacity: 0.5;
  }
`])));function qs(t){return t.replace(/\(\.\.\.\)\./g,`(...)
  .`).replace(/__WEBPACK_IMPORTED_MODULE_\d+_+/g,"").replace(/___default\./g,".").replace(new RegExp(" \\(https?:\\/\\/".concat(window.location.host),"g")," (")}function Xs(t){let{error:e}=t;if(!(e instanceof Pe))throw e;const{cause:n}=e,o=(n==null?void 0:n.stack)||e.stack,a=o&&!(n instanceof gt)&&!e.message.includes("Module build failed:"),r=n instanceof gt?n.path:[],s=n instanceof gt&&n.helpId||e.helpId,l=c.useCallback(()=>{window.location.reload()},[]);return i(ne,{height:"fill",overflow:"auto",padding:4,sizing:"border",tone:"critical",children:C(je,{children:[i(Wr,{as:"h2",children:"Encountered an error while reading structure"}),C(ne,{marginTop:4,padding:4,radius:2,overflow:"auto",shadow:1,tone:"inherit",children:[r.length>0&&C(ee,{space:2,children:[i(mn,{children:"Structure path"}),i(Ct,{children:r.slice(1).map((u,d)=>i(Ks,{children:u},"".concat(u,"-").concat(d)))})]}),C(ee,{marginTop:4,space:2,children:[i(mn,{children:"Error"}),i(Ct,{children:a?qs(o):e.message})]}),s&&i(M,{marginTop:4,children:i(R,{children:i("a",{href:Mo(s),rel:"noopener noreferrer",target:"_blank",children:"View documentation"})})}),i(M,{marginTop:4,children:i(q,{text:"Reload",icon:go,tone:"primary",onClick:l})})]})]})})}function Js(t){const{isSelected:e,pane:n,paneKey:o}=t,a=he(n)&&n.type||null;return C(Ke,{id:o,selected:e,children:[i(Je,{title:"Unknown pane type"}),i(Te,{children:i(M,{padding:4,children:typeof a=="string"?C(R,{as:"p",muted:!0,children:["Structure item of type ",i("code",{children:a})," is not a known entity."]}):C(R,{as:"p",muted:!0,children:["Structure item is missing required ",i("code",{children:"type"})," property."]})})})]})}function Qs(t){const e=[{ms:300,message:"Loadingâ€¦"},{ms:5e3,message:"Still loadingâ€¦"}],n=ue(null);return Vr(...e.map(o=>{let{ms:a,message:r}=o;return n.pipe(Ur(r),Hr(a))}))}const Zs="Loadingâ€¦",ec=z(F)(En||(En=L([`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`]))),ot=c.memo(t=>{const{delay:e=300,flex:n,message:o=Qs,minWidth:a,paneKey:r,path:s,selected:l,title:u,tone:d}=t,p=c.useMemo(()=>typeof o=="function"?o(s?s.split(";"):[]):o,[o,s]),[h,b]=c.useState(()=>typeof p=="string"?p:Zs);c.useEffect(()=>{if(typeof p!="object"||typeof p.subscribe=="function")return;const y=p.subscribe(b);return()=>y.unsubscribe()},[p]);const[m,x]=c.useState(null),[P,I]=c.useState(!1);return c.useEffect(()=>{if(m)return Da(()=>I(!0))},[m]),i(Ke,{flex:n,id:r,minWidth:a,selected:l,tone:d,children:i(Te,{children:C(ec,{align:"center","data-mounted":P?"":void 0,direction:"column",height:"fill",justify:"center",ref:x,children:[i(Ee,{muted:!0}),(u||h)&&i(M,{marginTop:3,children:i(R,{align:"center",muted:!0,size:1,children:u||h})})]})})})});ot.displayName="LoadingPane";const tc={component:c.lazy(()=>Fe(()=>import("./index-bed68c8a-b0b5d233.js"),["static/index-bed68c8a-b0b5d233.js","static/sanity-46aa66c6.js"])),document:c.lazy(()=>Fe(()=>import("./index-9357fb28-e06001f2.js"),["static/index-9357fb28-e06001f2.js","static/sanity-46aa66c6.js"])),documentList:c.lazy(()=>Fe(()=>import("./index-706f5feb-ff1ed996.js"),["static/index-706f5feb-ff1ed996.js","static/sanity-46aa66c6.js","static/PaneItem-5ece3d70-8b123fdf.js"])),list:c.lazy(()=>Fe(()=>import("./index-d0724341-d802f07d.js"),["static/index-d0724341-d802f07d.js","static/sanity-46aa66c6.js","static/PaneItem-5ece3d70-8b123fdf.js"]))},nc=c.memo(function(e){const{active:n,childItemId:o,groupIndex:a,index:r,itemId:s,pane:l,paneKey:u,params:d,payload:p,selected:h,siblingIndex:b}=e,m=tc[l.type]||Js;return i(Ds,{flatIndex:r,index:a,params:d,payload:p,siblingIndex:b,children:i(c.Suspense,{fallback:i(ot,{paneKey:u}),children:i(m,{childItemId:o||"",index:r,itemId:s,isActive:n,isSelected:h,paneKey:u,pane:l})})})},(t,e)=>{let{params:n={},payload:o=null,...a}=t,{params:r={},payload:s=null,...l}=e;if(!St(n,r)||!St(o,s))return!1;const u=new Set([...Object.keys(a),...Object.keys(l)]);for(const d of u)if(a[d]!==l[d])return!1;return!0});function Wo(t){const{children:e,flex:n,minWidth:o,paneKey:a,title:r="Error",tone:s="critical"}=t;return C(Ke,{flex:n,id:a,minWidth:o,tone:s,children:[i(Je,{title:r}),i(Te,{overflow:"auto",children:i(M,{paddingX:4,paddingY:5,children:e})})]})}function oc(t){return t==="delete"?`An error occurred while attempting to delete this document.
      This usually means that there are other documents that refers to it.`:t==="unpublish"?`An error occurred while attempting to unpublish this document.
      This usually means that there are other documents that refers to it.`:"An error occurred during ".concat(t)}function ac(t){return t==="publish"?"The document was published":t==="unpublish"?"The document was unpublished. A draft has been created from the latest published version.":t==="discardChanges"?"All changes since last publish has now been discarded. The discarded draft can still be recovered from history":t==="delete"?"This document was deleted. It can still be recovered from history and if you continue editing it will be recreated.":"Successfully performed ".concat(t," on document")}const rc=["patch","commit"],ic=c.memo(function(){const{push:e}=qe(),{documentId:n,documentType:o}=W(),a=Ma(n,o),r=c.useRef(a);return c.useEffect(()=>{!a||a===r.current||(a.type==="error"&&e({closable:!0,duration:3e4,status:"error",title:oc(a.op),description:C("details",{children:[i("summary",{children:"Details"}),a.error.message]})}),a.type==="success"&&!rc.includes(a.op)&&e({closable:!0,status:"success",title:ac(a.op)}),r.current=a)},[a,e]),null}),sc=t=>{const{features:e,hasValue:n,changesOpen:o}=t;return e.reviewChanges?{action:"reviewChanges",title:"Review changes",icon:Gr,isDisabled:o||!n}:null},cc=t=>{let{hasValue:e}=t;return{action:"inspect",title:"Inspect",icon:$r,isDisabled:!e,shortcut:"Ctrl+Alt+I"}},lc=t=>{let{previewUrl:e}=t;return e?{action:"production-preview",title:"Open preview",icon:Yr,shortcut:"Ctrl+Alt+O"}:null},uc=t=>[lc,sc,cc].filter(Boolean).map(n=>n(t)).filter(n=>n!==null),dc=t=>he(t)&&typeof t._id=="string"&&typeof t._type=="string";function pc(t){const[e,n]=c.useState(void 0),[o,a]=c.useState(null),{resolveProductionUrl:r}=Xe().document,s=Pi(t);if(o)throw o;return c.useEffect(()=>{s.pipe(xo(500),Ze(l=>dc(l)?Ro(r({document:l})):ue(void 0)),br(l=>{const u=he(l)&&typeof l.message=="string"?l.message:"Unknown error";throw new Error("An error was thrown while trying to get your preview url: ".concat(u))})).subscribe({next:n,error:a})},[r,s]),e}function hc(t,e){const n=e.panePayload||{},o=e.templateName;e.urlTemplate&&o&&o!==e.urlTemplate&&console.warn('Conflicting templates: URL says "'.concat(e.urlTemplate,'", structure node says "').concat(o,'". Using "').concat(o,'".'));const a=o||e.urlTemplate,r=t.filter(u=>u.schemaType===e.documentType),s={...e.templateParams,...typeof n=="object"?n||{}:{}};let l=a;return!a&&r.length===1&&(l=r[0].id),{templateName:l,templateParams:s}}const fc={},Vo=c.memo(t=>{const{children:e,index:n,pane:o,paneKey:a}=t,r=Ra(Ta),s=lo(),l=uo(),{actions:u,badges:d,unstable_languageFilter:p}=Xe().document,h=ka(),b=ja(),m=ke(),{features:x}=fe(),{push:P}=qe(),{options:I,menuItemGroups:_,title:y=null,views:w=[]}=o,v=ie(I),f=v.id,g=Pt(f),E=I.type,S=ie(m.params),O=ie(m.payload),{templateName:D,templateParams:T}=c.useMemo(()=>hc(l,{documentType:E,templateName:v.template,templateParams:v.templateParameters,panePayload:O,urlTemplate:S==null?void 0:S.template}),[E,v,S,O,l]),N=Na({documentId:g,documentType:E,templateName:D,templateParams:T}),j=ie(N),{patch:k}=Aa(g,E),X=La(g,E),{validation:de}=Fa(g,E),oe=za(g,E),te=s.get(E),U=(X==null?void 0:X.draft)||(X==null?void 0:X.published)||j.value,ae=c.useMemo(()=>u({schemaType:E,documentId:g}),[u,g,E]),Jo=c.useMemo(()=>d({schemaType:E,documentId:g}),[d,g,E]),Qo=c.useMemo(()=>p({schemaType:E,documentId:g}),[g,E,p]),qt=ie(de),at=ie(w),V=m.params||fc,[Xt,Ce]=c.useState(()=>V.path?Me(V.path):[]),Zo=V.view||at[0]&&at[0].id||null,rt=c.useMemo(()=>h.getTimeline({publishedId:g,enableTrace:po}),[g,h]),[ea,ta]=c.useState("closed"),{historyController:re}=ho(()=>h.getTimelineController({client:r,documentId:g,documentType:E,timeline:rt}),[r,g,E,rt]);re.setRange(V.since||null,V.rev||null);const Ie=re.changesPanelActive(),me=pc(U),[na,oa]=c.useState([]);c.useEffect(()=>{const A=b.documentPresence(g).subscribe(H=>{oa(H)});return()=>{A.unsubscribe()}},[g,b]);const Jt=Boolean(U),it=c.useMemo(()=>uc({features:x,hasValue:Jt,changesOpen:Ie,previewUrl:me}),[x,Jt,Ie,me]),st=V.inspect==="on",Qt=Ie?re.sinceAttributes():(X==null?void 0:X.published)||null,ct=oe==="connected"&&X.ready,Zt=re.onOlderRevision(),en=c.useMemo(()=>Zt?re.displayed()||{_id:U._id,_type:U._type}:U,[re,V.rev,V.since,U,Zt]),aa=c.useCallback((A,H)=>{m.setParams({...m.params,since:A,rev:H||void 0})},[m]),ra=c.useCallback(A=>{Ce(A),b.setLocation([{type:"document",documentId:g,path:A,lastActiveAt:new Date().toISOString()}])},[g,b,Ce]),ia=c.useCallback(A=>{Ce([])},[Ce]),tn=c.useRef(()=>{throw new Error("Nope")});tn.current=A=>{k.execute(Ba(A.patches),j.value)};const sa=c.useCallback(A=>tn.current(A),[]),ca=c.useCallback(()=>{m.setParams({...V,since:void 0})},[m,V]),lt=c.useCallback(()=>{m.setParams({...V,since:"@lastPublished"})},[m,V]),la=c.useCallback(()=>m.closeCurrent(),[m]),ua=c.useCallback(()=>m.duplicateCurrent(),[m]),Le=c.useCallback(function(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!st)?m.setParams({...V,inspect:"on"}):m.setParams(kt(V,"inspect"))},[st,m,V]),ut=c.useCallback(A=>A.action==="production-preview"&&me?(window.open(me),!0):A.action==="inspect"?(Le(!0),!0):A.action==="reviewChanges"?(lt(),!0):!1,[lt,me,Le]),da=c.useCallback(A=>{for(const H of it)if(H.shortcut&&jt(H.shortcut,A)){A.preventDefault(),A.stopPropagation(),ut(H);return}},[ut,it]),pa=c.useCallback(()=>Le(!1),[Le]),[ha,nn]=c.useState([]),[fa,on]=c.useState(),[an,rn]=c.useState(),[sn,cn]=c.useState(),ma=c.useCallback((A,H)=>{rn(J=>ve(J,A,H))},[]),ga=c.useCallback((A,H)=>{cn(J=>ve(J,A,H))},[]),va=c.useCallback((A,H)=>on(J=>ve(J,A,H)),[]),ba=U._createdAt?"update":"create",ln=c.useMemo(()=>Boolean(te==null?void 0:te.liveEdit),[E,s]),dt=U._id?U._id:"dummy-id",ya=c.useMemo(()=>({...U,_id:ln?Pt(dt):Wa(dt)}),[ln,U,dt]),[Oe,pt]=Va({document:ya,permission:ba}),{revTime:un}=re,dn=!(U!=null&&U._id),_a=c.useMemo(()=>{const A=!pt&&!(Oe!=null&&Oe.granted),H=!pn(te,"update"),J=dn&&!pn(te,"create");return!ct||un!==null||A||H||J||oe==="reconnecting"},[oe,dn,pt,Oe==null?void 0:Oe.granted,ct,un,te]),ht=Ua(te,{value:en,readOnly:_a,comparisonValue:Qt,focusPath:Xt,openPath:ha,collapsedPaths:an,presence:na,validation:qt,collapsedFieldSets:sn,fieldGroupState:fa,changesOpen:Ie}),ft=c.useRef(ht);ft.current=ht;const xa=c.useCallback(A=>{Ha(ft.current,A).forEach(J=>{J.type==="expandPath"&&rn(ge=>ve(ge,J.path,!1)),J.type==="expandFieldSet"&&cn(ge=>ve(ge,J.path,!1)),J.type==="setSelectedGroup"&&on(ge=>ve(ge,J.path,J.groupName))}),nn(A)},[ft]),Sa={actions:ae,activeViewId:Zo,badges:Jo,changesOpen:Ie,collapsedFieldSets:sn,collapsedPaths:an,compareValue:Qt,connectionState:oe,displayed:en,documentId:g,documentIdRaw:f,documentType:E,editState:X,focusPath:Xt,menuItems:it,onBlur:ia,onChange:sa,onFocus:ra,onPathOpen:xa,onHistoryClose:ca,onHistoryOpen:lt,onInspectClose:pa,onKeyUp:da,onMenuAction:ut,onPaneClose:la,onPaneSplit:ua,onSetActiveFieldGroup:va,onSetCollapsedPath:ma,onSetCollapsedFieldSet:ga,historyController:re,index:n,inspectOpen:st,validation:qt,menuItemGroups:_||[],paneKey:a,previewUrl:me,ready:ct,schemaType:te,isPermissionsLoading:pt,permissions:Oe,setTimelineMode:ta,setTimelineRange:aa,timeline:rt,timelineMode:ea,title:y,value:U,views:at,formState:ht,unstable_languageFilter:Qo};return c.useEffect(()=>{oe==="reconnecting"&&P({id:"sanity/desk/reconnecting",status:"warning",title:i(B,{children:"Connection lost. Reconnectingâ€¦"})})},[oe,P]),c.useEffect(()=>{Ce(V.path?Me(V.path):[]),nn([])},[V.path,g]),i(Ga.Provider,{value:Sa,children:e})});Vo.displayName="DocumentPaneProvider";const mc={create:"created",delete:"deleted",discardDraft:"discarded draft",initial:"created",editDraft:"edited",editLive:"live edited",publish:"published",unpublish:"unpublished"},gc={create:vn,delete:_i,discardDraft:Re,initial:vn,editDraft:bn,editLive:bn,publish:Oo,unpublish:xi};function Rt(t){return mc[t]}function vc(t){return gc[t]}function bc(t,e){return{topSelection:e,bottomSelection:t,disabledBeforeSelection:!0}}function yc(t){return{topSelection:t,bottomSelection:t}}function _c(t){let{maxLength:e,userIds:n}=t;return i(So,{maxLength:e,children:n.map(o=>i(Po,{user:o,withTooltip:!0},o))})}const ye=z(F)(t=>{let{theme:e}=t;var n;const o=(n=e.sanity.color.base.skeleton)==null?void 0:n.from;return se(Cn||(Cn=L([`
    --timeline-hairline-width: 1px;
    position: relative;
    z-index: 2;
    margin: 0;
    padding: 0;

    &::before {
      position: absolute;
      content: '';
      height: 100%;
      width: var(--timeline-hairline-width);
      background: `,`;
      top: 0;
      left: calc((100% - var(--timeline-hairline-width)) / 2);
      z-index: 1;
    }
  `])),o)}),xc=z(fo)(t=>{let{state:e="enabled",isHovered:n,theme:o}=t;const{color:a}=o.sanity,r=a.button.default.primary.enabled;return se(In||(In=L([`
    position: relative;
    min-width: 244px;

    `,`

    `,`

      `,`

    // line styling ðŸ‘‡
      &:first-child `,`::before {
      height: 50%;
      top: unset;
      bottom: 0;
    }

    &:last-child `,`::before {
      height: 50%;
    }

    `,`

    // Remove timeline lines when using the keyboard to navigate timeline items
    &:focus `,`::before {
      background: transparent;
    }
  `])),e==="selected"&&se(On||(On=L([`
      --card-bg-color: `,`;
      --card-fg-color: `,`;
      --card-muted-fg-color: `,`;
      --card-border-color: `,`;
      &:not([data-selection-bottom='true']) {
        border-top-left-radius: 0;
        border-top-right-radius: 0;
      }
    `])),r.bg,r.fg,r.muted,r.bg),e==="withinSelection"&&se(Dn||(Dn=L([`
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
      box-shadow: 0px 3px 0px 0px var(--card-bg-color);
      &:not([data-selection-top='true']) {
        border-radius: 0;
      }

      `,` {
        &::before {
          background: var(--card-hairline-soft-color);
        }
      }
    `])),ye),e==="disabled"&&se(Mn||(Mn=L([`
      [data-ui='Avatar'] {
        opacity: 0.2;
      }
    `]))),ye,ye,(n||e==="selected")&&se(Rn||(Rn=L([`
      `,`::before {
        background: transparent;
      }
    `])),ye),ye)}),Sc=z(M)(Tn||(Tn=L([`
  background: var(--card-bg-color);
  border-radius: 50px;
  position: relative;
  z-index: 2;
`]))),Pc=z(R)(kn||(kn=L([`
  text-transform: capitalize;
`]))),wc=z(M)(jn||(jn=L([`
  min-width: 1rem;
  margin-left: `,`;
`])),t=>{let{theme:e}=t;return"-".concat(be(e.sanity.space[1]))}),Ec={initial:"primary",create:"primary",publish:"positive",editLive:"caution",editDraft:"caution",unpublish:"critical",discardDraft:"critical",delete:"critical",withinSelection:"primary"};function Cc(t){const{isSelectionBottom:e,isSelectionTop:n,state:o,onSelect:a,timestamp:r,chunk:s,type:l}=t,u=vc(l),d=Array.from(s.authors),p=ce(r,{minimal:!0}),h=c.useMemo(()=>{const _=new Date(r);return pi(_,"MMM d, yyyy, hh:mm a")},[r]),b=o==="selected",m=o==="withinSelection",[x,P]=c.useState(!1),I=c.useCallback(_=>{_.preventDefault(),_.stopPropagation(),a(s)},[a,s]);return i(xc,{"data-ui":"timelineItem",radius:2,"data-chunk-id":s.id,padding:0,tone:x||b||m?"default":Ec[l],pressed:m,state:o,selected:b,isHovered:x,disabled:o==="disabled","data-selection-bottom":e,"data-selection-top":n,onClick:I,children:i(we,{portal:!0,placement:"left",fallbackPlacements:["bottom"],content:i(ee,{padding:3,space:3,children:i(R,{size:1,children:h})}),children:i(M,{onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),paddingX:2,children:C(F,{align:"stretch",children:[i(ye,{align:"center",children:i(Sc,{padding:2,children:i(R,{size:2,children:u&&c.createElement(u)})})}),C(ee,{space:2,margin:2,children:[i(M,{children:i(Pc,{size:1,weight:"medium",children:Rt(l)||i("code",{children:l})})}),i(wc,{paddingX:1,children:i(R,{size:0,muted:!0,children:p})})]}),i(F,{flex:1,justify:"flex-end",align:"center",children:i(_c,{maxLength:3,userIds:d})})]})})})})}const Ic=z(M)(Nn||(Nn=L([`
  overflow: auto;
  -webkit-overflow-scrolling: touch;
`]))),Oc=z(ee)(An||(An=L([`
  max-width: 200px;
`]))),Dc=z(Nt)(Ln||(Ln=L([`
  overflow: auto;
  box-sizing: border-box;
  max-height: calc(100vh - 198px);
`]))),Mc=20,Tt=t=>{let{timeline:e,disabledBeforeSelection:n,topSelection:o,bottomSelection:a,onSelect:r,onLoadMore:s}=t;const l=c.useRef(null),u=c.useRef(null),[d,p]=c.useState(null);let h=n?"disabled":"enabled";const b=c.useCallback(()=>{const m=l.current;if(d&&m){const{offsetHeight:x,scrollTop:P}=m,I=x+P+Mc,_=d.offsetTop<I;_&&requestAnimationFrame(()=>s(_))}},[s,d]);return c.useEffect(b,[b]),C(Ic,{ref:l,onScroll:b,"data-ui":"timeline",children:[e.chunkCount===0&&C(Oc,{padding:3,space:3,children:[i(R,{size:1,weight:"semibold",children:"No document history"}),i(R,{muted:!0,size:1,children:"When changing the content of the document, the document versions will appear in this menu."})]}),e.chunkCount>0&&i(Dc,{ref:u,padding:1,space:0,children:e.mapChunks(m=>{const x=o===m,P=a===m;x&&(h="withinSelection"),P&&(h="selected");const I=i(Cc,{chunk:m,isSelectionBottom:P,isSelectionTop:x,state:h,onSelect:r,type:m.type,timestamp:m.endTimestamp},m.id);return h==="selected"&&(h="enabled"),I})}),!e.reachedEarliestEntry&&i(F,{align:"center",justify:"center",padding:4,ref:p,children:i(Ee,{muted:!0})})]})};Tt.displayName="Timeline";const Rc=z(At)(Fn||(Fn=L([`
  & > div {
    display: flex;
    flex-direction: column;

    & > [data-ui='Card'] {
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;

      /* This is the scrollable container rendered by <Timeline /> */
      & > div {
        flex: 1;
        min-height: 0;
      }
    }
  }
`])));function Uo(t){let{chunk:e,mode:n,placement:o}=t;const{historyController:a,setTimelineRange:r,setTimelineMode:s,timeline:l,ready:u}=W(),[d,p]=c.useState(!1),[h,b]=c.useState(null),[m,x]=c.useState(null),P=c.useCallback(()=>{s(n),p(!0)},[n,s]),I=c.useCallback(()=>{s("closed"),p(!1)},[s]),_=c.useCallback(()=>{I()},[I]),y=c.useCallback(N=>{d&&(N.key==="Escape"||N.key==="Tab")&&(I(),h==null||h.focus())},[h,I,d]);Bt(_,[m,h]),Wt(y);const w=c.useCallback(N=>{const[j,k]=a.findRangeForNewRev(N);s("closed"),p(!1),r(j,k)},[a,s,r]),v=c.useCallback(N=>{const[j,k]=a.findRangeForNewSince(N);s("closed"),p(!1),r(j,k)},[a,s,r]),f=c.useCallback(N=>{a.setLoadMore(N)},[a]),g=d&&i("div",{ref:x,children:n==="rev"?i(Tt,{onSelect:w,onLoadMore:f,timeline:l,...yc(a.realRevChunk)}):i(Tt,{onSelect:v,onLoadMore:f,timeline:l,...bc(a.sinceTime,a.realRevChunk)})}),E=ce((e==null?void 0:e.endTimestamp)||"",{agoSuffix:!0}),S=e?"".concat(yr(Rt(e.type))," ").concat(E):"Current version",O=e?"Since ".concat(Rt(e.type)," ").concat(E):"Since unknown version";return i(Rc,{constrainSize:!0,content:g,"data-ui":"versionMenu",open:d,placement:o,portal:!0,children:i(q,{disabled:!u,mode:"bleed",fontSize:1,padding:2,iconRight:_r,onClick:d?I:P,ref:b,selected:d,text:d?n==="rev"?"Select version":"Review changes since":n==="rev"?S:O})})}function Tc(){return C(F,{align:"center",justify:"center",children:[i(Ee,{muted:!0}),i(M,{marginTop:3,children:i(R,{align:"center",children:"Loading changesâ€¦"})})]})}function kc(t){const e=new Map;return Kr(t,n=>{if(n.action==="unchanged"||!("annotation"in n)||!n.annotation)return!0;const{author:o,timestamp:a}=n.annotation,r=e.get(o);return(!r||r.timestamp<a)&&e.set(o,n.annotation),!0}),Array.from(e.values()).sort((n,o)=>n.timestamp<o.timestamp?1:-1)}const jc=z(mo)(zn||(zn=L([`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`])));function Nc(){const{documentId:t,onHistoryClose:e,historyController:n,schemaType:o,value:a}=W(),{collapsed:r}=xr(),s=c.useRef(null),u=n.selectionState==="loading",d=n.sinceTime,p=n.currentObjectDiff(),h=!n.onOlderRevision(),b=Se.useMemo(()=>({documentId:t,schemaType:o,FieldWrapper:Sr,rootDiff:p,isComparingCurrent:h,value:a}),[t,p,h,o,a]),m=Se.useMemo(()=>p?kc(p):[],[p]);return r?null:C(F,{direction:"column",flex:1,style:{borderLeft:"1px dashed var(--card-border-color)",overflow:"hidden",minWidth:320},"data-testid":"review-changes-pane",children:[i(Je,{actions:i(q,{icon:Re,mode:"bleed",onClick:e,padding:3,title:"Hide changes panel"}),subActions:m.length>0&&i(M,{paddingRight:1,children:i(Pr,{annotations:m,description:"Changes by",placement:"bottom-end",children:i(So,{maxLength:4,children:m.map(x=>{let{author:P}=x;return i(Po,{user:P},P)})})})}),tabs:i(Uo,{mode:"since",chunk:d,placement:"bottom-start"}),title:"Changes"}),i(Te,{children:i(zt,{element:s.current,children:i(jc,{"data-ui":"Scroller",ref:s,children:i(M,{flex:1,padding:4,children:i(Ac,{diff:p,documentContext:b,loading:u})})})})})]})}function Ac(t){let{diff:e,documentContext:n,loading:o}=t;const{schemaType:a}=W();return o?i(Tc,{}):e?i(Er.Provider,{value:n,children:i(Cr,{diff:e,schemaType:a})}):i(wr,{})}function Lc(t,e,n){const o=$a(),[a,r]=c.useState(n),s=c.useMemo(()=>o.forNamespace("desk-tool"),[o]),l=c.useMemo(()=>t?s.forNamespace(t).forKey(e):s.forKey(e),[s,t,e]);c.useEffect(()=>{const d=l.listen(n).subscribe({next:r});return()=>d==null?void 0:d.unsubscribe()},[n,e,t,l]);const u=c.useCallback(d=>{r(d),l.set(d)},[l]);return c.useMemo(()=>[a,u],[u,a])}const _e={id:"parsed",title:"Parsed"},xe={id:"raw",title:"Raw JSON"},Fc=[_e,xe],Ye=Cs(1e3);function Ho(t,e){const n=Ye.get(t);return n===void 0?(Ye.set(t,Array.isArray(e)||he(e)),Ho(t,e)):n}function zc(t){const{path:e}=t,n=Ye.get(e);n!==void 0&&Ye.set(e,!n)}function Go(t){const e=window.getSelection();if(e){const n=document.createRange();e.removeAllRanges(),n.selectNodeContents(t),e.addRange(n)}}function no(t){Go(t.currentTarget)}function Bc(t){t.keyCode===65&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),Go(t.currentTarget))}function Wc(t){return he(t)&&gn(t._id)&&gn(t._type)}const Vc=z.div(t=>{let{theme:e}=t;const{color:n,fonts:o,space:a}=e.sanity;return se(Bn||(Bn=L([`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: `,`;
      font-size: `,`px;
      line-height: `,`px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: `,`;
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: `,`;
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: 'â–¸ ';
      margin-left: calc(0 - `,` + 3px);
      font-size: `,`px;
      line-height: `,`px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: 'â–¾ ';
      font-size: `,`px;
      line-height: `,`px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: `,`;
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: `,`;
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: `,`;
    }

    & .json-inspector .json-inspector__value_string {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_boolean {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_number {
      color: `,`;
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: 'â†”';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `])),o.code.family,o.code.sizes[2].fontSize,o.code.sizes[2].lineHeight,be(a[4]),be(a[3]),be(a[4]),o.code.sizes[2].fontSize,o.code.sizes[2].lineHeight,o.code.sizes[2].fontSize,o.code.sizes[2].lineHeight,be(a[4]/2),n.syntax.property,n.syntax.constant,be(a[3]),n.syntax.string,n.syntax.boolean,n.syntax.number)});function Uc(t){const{onChange:e,query:n}=t,o=c.useCallback(a=>e(a.target.value),[e]);return i(hi,{icon:fi,onChange:o,placeholder:"Search",radius:2,value:n||""})}function Hc(t){const{value:e}=t,{onInspectClose:n,paneKey:o}=W(),a="".concat(o,"_inspect_"),[r,s]=Lc("desk-tool","inspect-view-preferred-view-mode-".concat(o),"parsed"),l=Fc.find(p=>p.id===r),u=c.useCallback(()=>{s(_e.id)},[s]),d=c.useCallback(()=>{s(xe.id)},[s]);return i(Ut,{id:"".concat(a,"dialog"),header:Wc(e)?C(B,{children:["Inspecting"," ",i("em",{children:i(qr,{document:e})})]}):i("em",{children:"No value"}),onClose:n,onClickOutside:n,width:3,children:C(F,{direction:"column",height:"fill",children:[i(ne,{padding:3,shadow:1,style:{position:"sticky",bottom:0,zIndex:3},children:C(Eo,{space:1,children:[i(Et,{"aria-controls":"".concat(a,"tabpanel"),fontSize:1,id:"".concat(a,"tab-").concat(_e.id),label:_e.title,onClick:u,selected:l===_e}),i(Et,{"aria-controls":"".concat(a,"tabpanel"),fontSize:1,id:"".concat(a,"tab-").concat(xe.id),label:xe.title,onClick:d,selected:l===xe})]})}),C(Xr,{"aria-labelledby":"".concat(a,"tab-").concat(r),flex:1,id:"".concat(a,"tabpanel"),overflow:"auto",padding:4,style:{outline:"none"},children:[l===_e&&i(Vc,{children:i(Es,{data:e,isExpanded:Ho,onClick:zc,search:Uc})}),l===xe&&i(Ct,{language:"json",tabIndex:0,onKeyDown:Bc,onDoubleClick:no,onFocus:no,children:JSON.stringify(e,null,2)})]})]})})}const Gc=z(ne)(Wn||(Wn=L([`
  position: relative;
  z-index: 50;
`]))),oo=z(R)(Vn||(Vn=L([`
  & > * {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
`]))),$o=c.memo(()=>{var t,e,n,o,a,r;const s=Ya(),{params:l,groupIndex:u,routerPanesState:d,replaceCurrent:p,BackLink:h}=ke(),b=(t=d[u])==null?void 0:t[0].id,m=d[u-1],x=m==null?void 0:m[0],P=x==null?void 0:x.id,I=Boolean((e=x==null?void 0:x.params)==null?void 0:e.rev),_=c.useMemo(()=>(l==null?void 0:l.parentRefPath)&&Me(l.parentRefPath)||null,[l==null?void 0:l.parentRefPath]),y=ho(()=>{const f=_==null?void 0:_[0];if(!P||!f||!_)return ue({loading:!1});const g=Pt(P),E=Me(f),S=E.findIndex(O=>typeof O=="object"&&"_key"in O);return wo(ue({loading:!0}),s.unstable_observePathsDocumentPair(g,S===-1?E:E.slice(0,S)).pipe(xo(750),pe(O=>{let{draft:D,published:T}=O;var N;return{loading:!1,result:{availability:{draft:D.availability,published:T.availability},refValue:(N=Ir(D.snapshot||T.snapshot,_))==null?void 0:N._ref}}})))},[P,_],{loading:!0}),w=c.useCallback(()=>{var f;y.loading||(f=y.result)!=null&&f.refValue&&p({id:y.result.refValue,params:l})},[y.loading,y.result,p,l]);return!P||!_||I||y.loading||!((n=y.result)!=null&&n.availability.draft.available)&&!((o=y.result)!=null&&o.availability.published.available)||((a=y.result)==null?void 0:a.refValue)===b?null:i(Gc,{shadow:1,tone:"caution","data-testid":"reference-changed-banner",children:i(je,{paddingX:4,paddingY:2,sizing:"border",width:1,children:C(F,{align:"center",children:[i(R,{size:1,children:i(Lt,{})}),(r=y.result)!=null&&r.refValue?C(B,{children:[i(M,{flex:1,marginLeft:3,children:i(oo,{title:"This reference has changed since you opened it.",size:1,children:"This reference has changed since you opened it."})}),i(M,{marginLeft:3,children:i(q,{onClick:w,icon:go,fontSize:1,mode:"ghost",padding:2,space:2,text:"Reload reference"})})]}):C(B,{children:[i(M,{flex:1,marginLeft:3,children:i(oo,{title:"This reference has been removed since you opened it.",size:1,children:"This reference has been removed since you opened it."})}),i(M,{marginLeft:3,children:i(q,{as:h,icon:Re,fontSize:1,mode:"ghost",padding:2,space:2,text:"Close reference"})})]})]})})})});$o.displayName="ReferenceChangedBanner";const $c=z(ne)(Un||(Un=L([`
  position: relative;
  z-index: 50;
`])));function Yc(t){let{granted:e,requiredPermission:n}=t;var o,a;const r=Jr(),s=((o=r==null?void 0:r.roles)==null?void 0:o.length)!==1,l=Kc(((a=r==null?void 0:r.roles)==null?void 0:a.map(u=>i("code",{children:u.title},u.name)))||[],", ");return e?null:i($c,{"data-testid":"permission-check-banner",shadow:1,tone:"transparent",children:i(je,{paddingX:4,paddingY:3,sizing:"border",width:1,children:C(F,{align:"flex-start",children:[i(R,{size:1,children:i(Qr,{})}),i(M,{flex:1,marginLeft:3,children:C(R,{size:1,children:["Your role",s&&"s"," ",l," ",s?"do":"does"," not have permissions to"," ",n," this document."]})})]})})})}function Kc(t,e){return t.reduce((n,o)=>n===null?[o]:n.concat([e,o]),null)}function qc(t){const e=c.useRef();return c.useEffect(()=>{e.current=t},[t]),e.current}const Xc=1e3*60*60*24*24;function Jc(t){const e=qe(),n=qc(t.enabled);c.useEffect(()=>{!n&&t.enabled&&e.push({...t,duration:Xc}),n&&!t.enabled&&e.push({...t,duration:.01})},[t,e,n])}const Qc=t=>t.preventDefault();function Zc(t){var e;const{hidden:n,margins:o}=t,{collapsedFieldSets:a,collapsedPaths:r,displayed:s,editState:l,documentId:u,documentType:d,onChange:p,validation:h,ready:b,formState:m,onFocus:x,onBlur:P,onSetCollapsedPath:I,onPathOpen:_,onSetCollapsedFieldSet:y,onSetActiveFieldGroup:w}=W(),v=Do(),f=Zr(u),g=c.useMemo(()=>ei(),[]),E=(e=l==null?void 0:l.transactionSyncLock)==null?void 0:e.enabled;Jc({id:"sync-lock-".concat(u),status:"warning",enabled:E,title:"Syncing documentâ€¦",description:"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds"}),c.useEffect(()=>{const D=v.pair.documentEvents(u,d).pipe(ti(T=>{T.type==="mutation"&&g.publish(el(T)),T.type==="rebase"&&g.publish(tl(T))})).subscribe();return()=>{D.unsubscribe()}},[u,v,d,g]);const S=Boolean(s==null?void 0:s._rev);c.useEffect(()=>{S&&g.publish({type:"mutation",patches:[],snapshot:s})},[S]);const O=c.useRef(null);return c.useEffect(()=>{ni(O.current)},[]),i(je,{hidden:n,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:i(oi,{margins:o,children:i(M,{as:"form",onSubmit:Qc,ref:O,children:b?m===null?i(M,{padding:2,children:i(R,{children:"This form is hidden"})}):i(ai,{__internal_patchChannel:g,collapsedFieldSets:a,collapsedPaths:r,focusPath:m.focusPath,changed:m.changed,focused:m.focused,groups:m.groups,id:"root",members:m.members,onChange:p,onFieldGroupSelect:w,onPathBlur:P,onPathFocus:x,onPathOpen:_,onSetFieldSetCollapsed:y,onSetPathCollapsed:I,presence:f,readOnly:m.readOnly,schemaType:m.schemaType,validation:h,value:m.value}):i($t,{ms:300,children:C(F,{align:"center",direction:"column",height:"fill",justify:"center",children:[i(Ee,{muted:!0}),i(M,{marginTop:3,children:i(R,{align:"center",muted:!0,size:1,children:"Loading document"})})]})})})})})}function el(t){const e=t.mutations.map(n=>n.patch).filter(Boolean);return{type:"mutation",snapshot:t.document,patches:It(t.origin,e)}}function tl(t){const e=t.remoteMutations.map(o=>o.patch).filter(Boolean),n=t.localMutations.map(o=>o.patch).filter(Boolean);return{type:"rebase",snapshot:t.document,patches:It("remote",e).concat(It("local",n))}}function nl(){const{activeViewId:t,paneKey:e,views:n}=W(),o="".concat(e,"tabpanel");return i(Eo,{space:1,children:n.map((a,r)=>{var s;return i(ol,{icon:a.icon,id:"".concat(e,"tab-").concat(a.id),isActive:t===a.id,label:i(B,{children:a.title}),tabPanelId:o,viewId:r===0?null:(s=a.id)!=null?s:null},a.id)})})}function ol(t){const{icon:e,id:n,isActive:o,label:a,tabPanelId:r,viewId:s}=t,{ready:l}=W(),{setView:u}=ke(),d=c.useCallback(()=>u(s),[u,s]);return i(Et,{"aria-controls":r,disabled:!l,fontSize:1,icon:e,id:n,selected:o,label:a,onClick:d})}const xt={error:{tone:"critical",icon:ri},warning:{tone:"caution",icon:Lt},info:{tone:"primary",icon:ii}};function al(t){const{boundaryElement:e,isOpen:n,setOpen:o}=t,{onFocus:a,onPathOpen:r,schemaType:s,validation:l}=W(),u=c.useId(),d=l.length>0,p=l.some(Or),h=l.some(Dr),b=l.some(Mr),m=c.useMemo(()=>{if(p)return xt.error;if(h)return xt.warning;if(b)return xt.info},[p,b,h]),x=c.useCallback(I=>{r(I),a(I)},[a,r]),P=c.useCallback(()=>o(!1),[o]);return d?i(Co,{id:u||"",button:i(q,{...m,title:"Show validation issues",mode:"bleed","data-testid":"validation-list-button"}),menu:i(Nt,{open:n,children:i(Rr,{documentType:s,validation:l,onClose:P,onFocus:x})}),popover:{portal:!0,boundaryElement:e,constrainSize:!0,preventOverflow:!0,width:0},placement:"bottom"}):null}function rl(){const{connectionState:t,schemaType:e,title:n,value:o}=W(),a=Boolean(o)&&t==="connected",{error:r,value:s}=Tr({enabled:a,schemaType:e,value:o});return t!=="connected"?i(B,{}):o?a?r?C(B,{children:["Error: ",r.message]}):i(B,{children:(s==null?void 0:s.title)||i("span",{style:{color:"var(--card-muted-fg-color)"},children:"Untitled"})}):i(B,{children:n}):C(B,{children:["New ",(e==null?void 0:e.title)||(e==null?void 0:e.name)]})}const il=t=>Boolean(t.showAsAction),sl=Ka(il),Yo=c.memo(c.forwardRef((t,e)=>{let{rootElement:n}=t;const{onMenuAction:o,onPaneClose:a,onPaneSplit:r,historyController:s,validation:l,menuItems:u,menuItemGroups:d,schemaType:p,ready:h,views:b,unstable_languageFilter:m}=W(),{revTime:x}=s,{features:P}=fe(),{index:I,BackLink:_,hasGroupSiblings:y}=ke(),w=c.useMemo(()=>u.filter(sl),[u]),[v,f]=Se.useState(!1),g=b.length>1,E=P.reviewChanges,S=P.splitViews&&r&&b.length>1,O=S&&y,D=!O&&!P.backButton;return i(Je,{ref:e,loading:!h,title:i(rl,{}),tabs:g&&i(nl,{}),backButton:P.backButton&&I>0&&i(q,{as:_,"data-as":"a",icon:qa,mode:"bleed"}),subActions:E&&i(Uo,{chunk:x,mode:"rev",placement:"bottom-end"}),actions:C(vo,{space:1,children:[m.length>0&&i(B,{children:m.map((T,N)=>c.createElement(T,{key:"language-filter-".concat(N),schemaType:p}))}),l.length>0&&i(al,{boundaryElement:n,isOpen:v,setOpen:f},"validation-menu"),i(Xa,{itemGroups:d,items:w,onAction:o},"context-menu"),S&&i(q,{icon:Ja,mode:"bleed",onClick:r,title:"Split pane right"},"split-pane-button"),O&&i(q,{icon:Re,mode:"bleed",onClick:a,title:"Close split pane"},"close-view-button"),D&&i(q,{icon:Re,mode:"bleed",title:"Close pane group",as:_},"close-view-button")]})})}));Yo.displayName="DocumentPanelHeader";const cl=z(mo)(t=>{let{$disabled:e}=t;return e?{height:"100%"}:se(Hn||(Hn=L([`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `])))}),ll=function(e){const{footerHeight:n,isInspectOpen:o,rootElement:a,setDocumentPanelPortalElement:r}=e,{activeViewId:s,displayed:l,documentId:u,editState:d,value:p,views:h,ready:b,schemaType:m,permissions:x,isPermissionsLoading:P}=W(),{collapsed:I}=yo(),_=kr(),{features:y}=fe(),[w,v]=c.useState(null),f=Qe(w),g=c.useRef(null),[E,S]=c.useState(null),O=p._createdAt?"update":"create",D=c.useMemo(()=>h.find(de=>de.id===s)||h[0]||{type:"form"},[s,h]),T=y.splitPanes&&g.current||_.element,N=c.useMemo(()=>I?[(f==null?void 0:f.height)||0,0,n?n+2:2,0]:[0,0,2,0],[I,n,f]),j=D.type!=="form",k=c.useMemo(()=>D.type==="component"&&D.component&&c.createElement(D.component,{document:{draft:(d==null?void 0:d.draft)||null,displayed:l||p,historical:l,published:(d==null?void 0:d.published)||null},documentId:u,options:D.options,schemaType:m}),[D,l,u,d==null?void 0:d.draft,d==null?void 0:d.published,m,p]);c.useEffect(()=>{E!=null&&E.scrollTo&&E.scrollTo(0,0)},[u,E]),c.useEffect(()=>{T&&r(T)},[T,r]);const X=c.useMemo(()=>o?i(Hc,{value:l||p}):null,[o,l,p]);return C(F,{direction:"column",flex:2,overflow:I?void 0:"hidden",children:[i(Yo,{rootElement:a,ref:v}),i(Te,{children:i(Ft,{element:T,__unstable_elements:{documentScrollElement:E},children:C(zt,{element:E,children:[D.type==="form"&&!P&&b&&C(B,{children:[i(Yc,{granted:Boolean(x==null?void 0:x.granted),requiredPermission:O}),i($o,{})]}),C(cl,{$disabled:I||!1,"data-testid":"document-panel-scroller",ref:S,children:[i(Zc,{hidden:j,margins:N},u+(b?"_ready":"_pending")),k]}),X,i("div",{"data-testid":"document-panel-portal",ref:g})]})})})]})},Ko=["left","bottom"],ul={small:0,medium:1,large:2,full:"auto"};function dl(t){const{dialog:e,referenceElement:n}=t;return i(At,{content:i(pl,{dialog:e}),fallbackPlacements:Ko,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:n})}function pl(t){const{dialog:e}=t,{cancelButtonIcon:n,cancelButtonText:o,confirmButtonIcon:a,confirmButtonText:r,message:s,onCancel:l,onConfirm:u,tone:d}=e,{isTopLayer:p}=To(),[h,b]=c.useState(null),m=c.useCallback(()=>{p&&l()},[p,l]),x=c.useCallback(P=>{P.key==="Escape"&&p&&l()},[p,l]);return Bt(m,[h]),Wt(x),C(F,{direction:"column",ref:b,style:{minWidth:320-16,maxWidth:400},children:[i(M,{flex:1,overflow:"auto",padding:4,children:i(R,{children:s})}),i(M,{paddingX:4,paddingY:3,style:{borderTop:"1px solid var(--card-border-color)"},children:C(mi,{columns:2,gap:2,children:[i(q,{icon:n,onClick:l,mode:"ghost",text:o||"Cancel"}),i(q,{icon:a,onClick:u,text:r||"Confirm",tone:d})]})})]})}function hl(t){const{dialog:e}=t,n=c.useId(),o=e.footer&&i(M,{paddingX:4,paddingY:3,children:e.footer});return i(Vt,{zOffset:"fullscreen",children:i(Ut,{__unstable_hideCloseButton:e.showCloseButton===!1,footer:o,header:e.header,id:n,onClose:e.onClose,onClickOutside:e.onClose,width:e.width===void 0?1:ul[e.width],portal:"documentPanelPortalElement",children:i(M,{padding:4,children:e.content})})})}function fl(t){const{dialog:e,referenceElement:n}=t;return i(At,{content:i(ml,{dialog:e}),fallbackPlacements:Ko,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:n})}function ml(t){const{dialog:e}=t,{content:n,onClose:o}=e,{isTopLayer:a}=To(),[r,s]=c.useState(null),l=c.useCallback(()=>{a&&o()},[a,o]),u=c.useCallback(d=>{d.key==="Escape"&&a&&o()},[a,o]);return Bt(l,[r]),Wt(u),i("div",{ref:s,children:n})}function Kt(t){const{dialog:e,referenceElement:n=null}=t,o=c.useId();if(e.type==="confirm")return i(dl,{dialog:e,referenceElement:n});if(e.type==="popover")return i(fl,{dialog:e,referenceElement:n});if(e.type==="dialog"||!e.type)return i(hl,{dialog:e});const a=e;return console.warn("Unsupported modal type ".concat(a.type)),i(Ut,{id:o,onClose:a.onClose,onClickOutside:a.onClose,width:2,children:i(M,{padding:4,children:a.content||C(B,{children:["Unexpected modal type (",i("code",{children:a.type}),")"]})})})}function gl(t){const{actionStates:e,disabled:n}=t,o=c.useId(),a=c.useRef(null),[r,s]=c.useState(-1),[l,u]=c.useState(null),d=c.useCallback(b=>{s(b)},[]),p=c.useMemo(()=>({placement:"top-end",portal:!0,preventOverflow:!0}),[]),h=e[r];return C(B,{children:[i(Co,{id:"".concat(o,"-action-menu"),button:i(q,{"data-testid":"action-menu-button","aria-label":"Open document actions",disabled:n,icon:si,mode:"ghost",ref:a}),menu:i(Nt,{padding:1,children:e.map((b,m)=>i(vl,{actionState:b,disabled:n,index:m,onAction:d},m))}),popover:p,ref:u}),h&&h.dialog&&i(Vt,{zOffset:"paneFooter",children:i(Kt,{dialog:h.dialog,referenceElement:l})})]})}function vl(t){const{actionState:e,disabled:n,index:o,onAction:a}=t,{onHandle:r}=e,s=c.useCallback(()=>{a(o),r&&r()},[o,a,r]),l=e.title&&i(M,{padding:2,children:i(R,{size:1,children:e.title})});return i(fo,{"data-testid":"action-".concat(e.label.replace(" ","")),disabled:n||Boolean(e.disabled),onClick:s,padding:0,tone:e.tone,children:i(we,{content:l,disabled:!l,fallbackPlacements:["left","bottom"],placement:"top",portal:!0,children:C(F,{align:"center",paddingX:3,children:[C(F,{flex:1,paddingY:3,children:[e.icon&&i(M,{marginRight:3,children:C(R,{children:[c.isValidElement(e.icon)&&e.icon,ci.isValidElementType(e.icon)&&c.createElement(e.icon)]})}),i(R,{children:e.label})]}),e.shortcut&&i(M,{marginLeft:3,children:i(Io,{keys:String(e.shortcut).split("+").map(u=>u.slice(0,1).toUpperCase()+u.slice(1))})})]})})})}function qo(t){const{disabled:e,showMenu:n,states:o}=t,[a,...r]=o,[s,l]=c.useState(null),u=c.useMemo(()=>!a||!a.title&&!a.shortcut?null:C(F,{padding:2,style:{maxWidth:300},align:"center",children:[i(R,{size:1,children:a.title}),a.shortcut&&i(M,{marginLeft:a.title?2:0,children:i(Io,{keys:String(a.shortcut).split("+").map(d=>d.slice(0,1).toUpperCase()+d.slice(1).toLowerCase())})})]}),[a]);return C(F,{children:[a&&i(jr,{zOffset:200,children:i(we,{disabled:!u,content:u,portal:!0,placement:"top",children:i(ee,{flex:1,children:i(q,{"data-testid":"action-".concat(a.label),disabled:e||Boolean(a.disabled),icon:a.icon,onClick:a.onHandle,ref:l,text:a.label,tone:a.tone||"primary"})})})}),n&&r.length>0&&i(M,{marginLeft:1,children:i(gl,{actionStates:r,disabled:e})}),a&&a.dialog&&i(Kt,{dialog:a.dialog,referenceElement:s})]})}const bl=c.memo(function(){const{actions:e,connectionState:n,documentId:o,editState:a}=W();return!e||!a?null:i(Yt,{actions:e,actionProps:a,children:r=>{let{states:s}=r;return i(qo,{disabled:n!=="connected",showMenu:e.length>1,states:s},o)}})}),yl=c.memo(function(){var e;const{connectionState:n,editState:o,historyController:a}=W(),r=((e=a.revTime)==null?void 0:e.id)||"",s=((o==null?void 0:o.draft)||(o==null?void 0:o.published)||{})._rev===r,l=c.useMemo(()=>({...o||{},revision:r}),[o,r]),u=c.useMemo(()=>[Qa],[]);return i(Yt,{actions:u,actionProps:l,children:d=>{let{states:p}=d;return i(qo,{disabled:n!=="connected"||Boolean(s),showMenu:!1,states:p})}})}),_l={primary:"primary",success:"positive",warning:"caution",danger:"critical"};function xl(t){let{states:e}=t;return i(vo,{space:1,children:e.map((n,o)=>i(we,{content:n.title&&i(M,{padding:2,children:i(R,{size:1,children:n.title})}),disabled:!n.title,placement:"top",portal:!0,children:i(li,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:n.color?_l[n.color]:void 0,style:{whiteSpace:"nowrap"},children:n.label})},String(o)))})}function Sl(){const{badges:t,editState:e}=W();return!e||!t?null:i(Is,{badges:t,badgeProps:e,children:n=>{let{states:o}=n;return i(xl,{states:o})}})}const Pl=z(F)(Gn||(Gn=L([`
  cursor: default;
`])));function wl(t){const{collapsed:e,disabled:n,lastPublished:o,lastUpdated:a,liveEdit:r}=t,s=ce(o||"",{minimal:!0,agoSuffix:!0}),l=ce(o||"",{minimal:!0}),u=ce(a||"",{minimal:!0,agoSuffix:!0}),d=ce(a||"",{minimal:!0});return i(Pl,{align:"center","data-ui":"SessionLayout",sizing:"border",children:i(we,{placement:"top",portal:!0,content:i(ee,{padding:3,space:3,children:i(R,{size:1,muted:!0,children:r?C(B,{children:["Last updated ",a?u:s]}):C(B,{children:["Last published ",s]})})}),children:i(q,{mode:"bleed",tone:r?"critical":"positive",tabIndex:-1,disabled:n,children:C(F,{align:"center",children:[i(M,{marginRight:e?0:3,children:i(R,{size:2,children:r?i(Nr,{}):i(Oo,{})})}),!e&&i(R,{size:1,weight:"medium",children:r?i(B,{children:a?d:l}):l})]})})})})}const El=z(Ne.path)($n||($n=L([`
  transform-origin: center;
`]))),Cl=t=>i(Ne.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...t}),Il=t=>i(El,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...t}),Ol=t=>i(Ne.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...t}),Dl=t=>i(Ne.path,{d:"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z",...t}),Ml=Za(Yn||(Yn=L([`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`]))),Rl=z.g(Kn||(Kn=L([`
  transform-origin: center;

  &[data-rotate] {
    animation: `,` 1s ease-in-out infinite;
  }
`])),Ml),Tl={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},kl={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},jl={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},Nl={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}},Al={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:0,transition:{duration:0}},changes:{pathLength:1,transition:{duration:.4,delay:.5}}};function Ll(t){const{status:e}=t;return e?i("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"",children:C(Ne.g,{variants:Tl,initial:e,animate:e,children:[C(Rl,{"data-rotate":e==="changes"?void 0:"",children:[i(Il,{variants:jl,initial:e,animate:e}),i(Cl,{variants:kl,initial:e,animate:e})]}),i(Ol,{variants:Nl,initial:e,animate:e}),i(Dl,{variants:Al,initial:e,animate:e})]})}):null}const Fl=Se.forwardRef(function(e,n){const{collapsed:o,status:a,lastUpdated:r,...s}=e,l=ce(r||"",{minimal:!0}),u=ce(r||"",{minimal:!0,agoSuffix:!0}),d=c.useMemo(()=>a==="syncing"?{text:"Saving...",tone:void 0}:a==="changes"?{text:l,tone:"caution"}:a==="saved"?{text:"Saved!",tone:"positive"}:{},[a,l]);return a?i(we,{placement:"top",portal:!0,disabled:a!=="changes",content:C(ee,{padding:3,space:3,children:[i(R,{size:1,weight:"semibold",children:"Review changes"}),C(R,{size:1,muted:!0,children:["Changes saved ",u]})]}),children:i(q,{mode:"bleed",justify:"flex-start",tone:d==null?void 0:d.tone,...s,"data-testid":"review-changes-button",ref:n,children:C(F,{align:"center",children:[i(M,{marginRight:o?0:3,children:i(R,{children:i(Ll,{status:a})})}),!o&&i(R,{size:1,weight:"medium",children:d==null?void 0:d.text})]})})}):null}),zl=Se.memo(Fl),Bl=1e3,Wl=3e3,Vl=c.memo(function(){var e;const{changesOpen:n,documentId:o,documentType:a,editState:r,onHistoryClose:s,onHistoryOpen:l,historyController:u,value:d}=W(),p=er(o,a),h=d==null?void 0:d._updatedAt,b=(e=r==null?void 0:r.published)==null?void 0:e._updatedAt,m=u.onOlderRevision(),x=Boolean(r==null?void 0:r.liveEdit),P=Boolean(r==null?void 0:r.published),I=Boolean(r==null?void 0:r.draft),[_,y]=c.useState(null),w=Qe(_),v=!w||(w==null?void 0:w.width)<300,[f,g]=c.useState(null);c.useEffect(()=>{if(f==="syncing"&&!p.isSyncing){const O=setTimeout(()=>g("saved"),Bl);return()=>clearTimeout(O)}if(f==="saved"){const O=setTimeout(()=>g(null),Wl);return()=>clearTimeout(O)}},[f,h,p.isSyncing]),c.useLayoutEffect(()=>{g(null)},[o]),c.useLayoutEffect(()=>{p.isSyncing&&g("syncing")},[p.isSyncing,h]);const E=c.useMemo(()=>i(zl,{lastUpdated:h,status:f||(I?"changes":void 0),onClick:n?s:l,disabled:m,selected:n,collapsed:v}),[I,n,s,l,h,m,f,v]),S=c.useMemo(()=>(x||P)&&i(M,{marginRight:1,children:i(wl,{disabled:m,lastPublished:b,lastUpdated:h,liveEdit:x,collapsed:v})}),[v,b,h,x,P,m]);return C(F,{align:"center","data-ui":"DocumentSparkline",ref:y,children:[S,C(F,{align:"center",flex:1,children:[E,!v&&i(M,{marginLeft:3,children:i(Sl,{})})]})]})}),Ul=z(M)(qn||(qn=L([`
  min-width: 10em;
  max-width: 16em;
`])));function Hl(t){const{actionsBoxRef:e}=t,{badges:n,historyController:o}=W(),a=o.onOlderRevision();return c.useMemo(()=>i(M,{paddingLeft:2,paddingRight:[2,3],paddingY:2,children:C(F,{align:"center",children:[i(M,{flex:[1,2],children:n&&i(Vl,{})}),i(Ul,{flex:1,marginLeft:[1,3],ref:e,children:a?i(yl,{}):i(bl,{})})]})}),[e,n,a])}function Gl(t){const{actionsBoxElement:e,activeIndex:n,children:o,id:a,onActionStart:r,onKeyDown:s,rootRef:l,states:u,...d}=t,p=u[n],h=c.useCallback(b=>{const m=u.filter(P=>P.shortcut&&jt(P.shortcut,b)),x=m[0];if(m.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(x.shortcut,'"')),x&&!x.disabled&&x.onHandle){b.preventDefault(),x.onHandle(),r(u.indexOf(x));return}s&&s(b)},[r,s,u]);return C(Ke,{id:a,onKeyDown:h,tabIndex:-1,...d,ref:l,children:[o,p&&p.dialog&&i(Vt,{zOffset:"paneFooter",children:i(Kt,{dialog:p.dialog,referenceElement:e})})]})}const Xo=Se.memo(t=>{const{actionsBoxElement:e,children:n,...o}=t,{actions:a,editState:r}=W(),[s,l]=c.useState(-1),u=c.useCallback(p=>{l(p)},[]),d=c.useMemo(()=>r&&{...r,onComplete:()=>{},revision:void 0},[r]);return!d||!a?null:i(Yt,{actionProps:d,actions:a,children:p=>{let{states:h}=p;return i(Gl,{...o,activeIndex:s,actionsBoxElement:e,onActionStart:u,states:h,children:n})}})});Xo.displayName="DocumentActionShortcuts";const ao=320,ro=600,io=320,so=["fixed","absolute"],$l=z(tr)(Xn||(Xn=L([`
  flex: 1;
  display: flex;
  min-height: 0;
  min-width: 0;
`]))),au=c.memo(function(e){const{name:n}=Xe();return i(bo,{name:e.pane.source||n,children:i(Yl,{...e})})});function Yl(t){var e;const{pane:n,paneKey:o}=t,{resolveNewDocumentOptions:a}=Xe().document,r=ke(),s=Kl(n.options,r.params),{documentType:l,isLoaded:u}=nr(s.id,s.type),d=c.useMemo(()=>a({type:"global"}),[a]),[p,h]=or({templateItems:d}),b=u&&!h,m=c.useMemo(()=>b&&l&&s.type!==l?ql(t,s,l):t,[t,l,b,s]),{ReferenceChildLink:x,handleEditReference:P,groupIndex:I,routerPanesState:_}=r,y=((e=_[I+1])==null?void 0:e[0].params)||{},w=_.length,{parentRefPath:v}=y,f=c.useMemo(()=>v?{path:Me(v),state:I>=w-1?"none":I>=w-2?"selected":"pressed"}:{path:[],state:"none"},[v,I,w]);return s.type==="*"&&!b?i(ot,{flex:2.5,minWidth:320,paneKey:o,title:"Loading documentâ€¦"}):l?i(Vo,{...m,children:i(ar,{EditReferenceLinkComponent:x,onEditReference:P,initialValueTemplateItems:p,activePath:f,children:i(Xl,{})})},l):i(Wo,{flex:2.5,minWidth:320,paneKey:o,title:i(B,{children:"The document was not found"}),children:i(ee,{space:4,children:C(R,{as:"p",children:["The document type is not defined, and a document with the ",i("code",{children:s.id})," ","identifier could not be found."]})})})}function Kl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=uo();return c.useMemo(()=>{if(t.type&&t.type!=="*")return t;const o=t.template||e.template,a=o?n.find(s=>s.id===o):void 0,r=a==null?void 0:a.schemaType;return r?{...t,type:r}:t},[t,e.template,n])}function ql(t,e,n){return{...t,pane:{...t.pane,options:{...e,type:n}}}}function Xl(){const{changesOpen:t,documentType:e,onFocus:n,onPathOpen:o,onHistoryOpen:a,onKeyUp:r,inspectOpen:s,paneKey:l,schemaType:u,value:d}=W(),{features:p}=fe(),{collapsed:h}=yo(),b=rr(),[m,x]=c.useState(null),[P,I]=c.useState(null),[_,y]=c.useState(null),[w,v]=c.useState(null),f=Qe(P),g=f==null?void 0:f.height,E=c.useMemo(()=>i(ll,{footerHeight:g||null,isInspectOpen:s,rootElement:m,setDocumentPanelPortalElement:v}),[g,m,s]),S=c.useMemo(()=>i(Ft,{__unstable_elements:{documentPanelPortalElement:w},children:i(hn,{position:so,zOffset:b.portal,children:i(ir,{ref:I,children:i(Hl,{actionsBoxRef:y})})})}),[w,b.portal]),O=c.useMemo(()=>!p.reviewChanges||!t?null:i(zt,{element:m,children:i(Nc,{})}),[t,p.reviewChanges,m]),D=c.useCallback(k=>{o(k),n(k)},[o,n]),T=c.useMemo(()=>u?C(B,{children:[i(hn,{position:so,zOffset:b.portal,children:i(F,{direction:"column",flex:1,height:h?void 0:"fill",children:C($l,{"data-testid":"change-connector-root",isReviewChangesOpen:t,onOpenReviewChanges:a,onSetFocus:D,children:[E,O]})})}),S,i(ic,{})]}):i(Wo,{flex:2.5,minWidth:320,paneKey:l,title:C(B,{children:["Unknown document type: ",i("code",{children:e})]}),tone:"caution",children:C(ee,{space:4,children:[e&&C(R,{as:"p",children:["This document has the schema type ",i("code",{children:e}),", which is not defined as a type in the local content studio schema."]}),!e&&i(R,{as:"p",children:"This document does not exist, and no schema type was specified for it."}),po]})}),[u,b.portal,h,t,a,D,E,O,S,l,e,d]),N=t?ro+io:ro,j=t?ao+io:ao;return i(Xo,{actionsBoxElement:_,currentMinWidth:N,"data-testid":"document-pane",flex:2.5,id:l,minWidth:j,onKeyUp:r,rootRef:x,children:T})}function Jl(){return i(ne,{height:"fill",children:i(F,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:i(je,{width:0,children:i(ne,{padding:4,radius:2,shadow:1,tone:"caution",children:C(F,{children:[i(M,{children:i(R,{size:1,children:i(Lt,{})})}),C(ee,{flex:1,marginLeft:3,space:3,children:[i(R,{as:"h1",size:1,weight:"bold",children:"No document types"}),i(R,{as:"p",muted:!0,size:1,children:"Please define at least one document type in your schema."}),i(R,{as:"p",muted:!0,size:1,children:i("a",{href:"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio",target:"_blank",rel:"noreferrer",children:"Learn how to add a document type â†’"})})]})]})})})})})}const Ql=z(js)(Jn||(Jn=L([`
  min-height: 100%;
  min-width: 320px;
`]))),Zl=jt("mod+s"),eu=c.memo(function(e){let{onPaneChange:n}=e;var o;const{navigate:a}=Ae(),{push:r}=qe(),s=lo(),l=sr(),{layoutCollapsed:u,setLayoutCollapsed:d}=fe(),{paneDataItems:p,resolvedPanes:h,routerPanes:b}=Hs(),[m,x]=c.useState(null),P=c.useCallback(()=>d(!0),[d]),I=c.useCallback(()=>d(!1),[d]);return c.useEffect(()=>{h.length&&n(h)},[n,h]),c.useEffect(()=>{if(l>1||!u||!b.some(v=>v.length>1))return;const w=b.map(v=>[v[0]]);a({panes:w},{replace:!0})},[l,a,u,b]),c.useEffect(()=>{const y=w=>{Zl(w)&&(w.preventDefault(),r({closable:!0,id:"auto-save-message",status:"info",title:"Your work is automatically saved!",duration:4e3}))};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[r]),((o=s._original)==null?void 0:o.types.some(cr))?C(Ft,{element:m||null,children:[i(Ql,{flex:1,height:u?void 0:"fill",minWidth:512,onCollapse:P,onExpand:I,children:p.map(y=>{let{active:w,childItemId:v,groupIndex:f,itemId:g,key:E,pane:S,index:O,params:D,path:T,payload:N,siblingIndex:j,selected:k}=y;return i(c.Fragment,{children:S===wt?i(ot,{paneKey:E,path:T,selected:k}):i(nc,{active:w,groupIndex:f,index:O,pane:S,childItemId:v,itemId:g,paneKey:E,params:D,payload:N,selected:k,siblingIndex:j})},"".concat(S===wt?"loading":S.type,"-").concat(O))})}),i("div",{"data-portal":"",ref:x})]}):i(Jl,{})}),tu={};function nu(t){let{tool:{options:e}}=t;const{unstable_sources:n}=Ar(),[o]=n,{source:a,defaultDocumentNode:r,structure:s}=e||{},{state:l}=Ae(),u=c.useMemo(()=>{const h=typeof l.intent=="string"?l.intent:void 0,b=he(l.params)?l.params:tu,m=l.payload;return h?{intent:h,params:b,payload:m}:void 0},[l]);c.useEffect(()=>(mt([]),()=>mt([])),[]);const[{error:d},p]=c.useState({error:null});return d?i(Xs,{error:d}):i(Lr,{onCatch:p,children:i(bo,{name:a||o.name,children:i(Fr,{defaultDocumentNode:r,structure:s,children:u?i(Ys,{...u}):i(eu,{onPaneChange:mt})})})})}var ru=Object.freeze({__proto__:null,default:nu});export{$t as Delay,au as DocumentPane,Vo as DocumentPaneProvider,ru as index,fe as useDeskTool,Lc as useDeskToolSetting};
